Main.flyLine=function(e){function i(){Main.penguin.alpha=0,M=d(e);var i={images:["index_files/fly.png"],frames:{width:180,height:170},animations:{fly:[0,2]},framerate:6},n=new createjs.SpriteSheet(i);l=new createjs.Sprite(n,"fly"),l.regX=105,l.regY=105,k.addChild(l),h()}function n(){L+=1/y,a(S,M)}function t(e,i){Main.fire("moveStage",e,i)}function a(i,n){var a=i*Math.cos(n)*L,d=i*Math.sin(n)*L-.5*C*f(L)+F,v=(i*Math.sin(n)-C*L,i*Math.cos(n)),p=-C/f(i)/f(Math.cos(n))*a+Math.sin(n)/Math.cos(n);l.rotation=p*e;var m=1*v/y;if(a+j>O?t(m,a+j):l.x=x-E-(a+j),l.y=T-b-d,0>=d&&0>p){if(L=0,j+=a,w=0,S=2.2*i/3,M=2.2*n/3,X++,Main.log(X),g(),F=0,Main.log(l.rotation),Math.abs(l.rotation)>=46&&1==X)return c(l.x,l.y,"down"),g(),void s(a+j);if(3==X){g();var k=800*Math.cos(n);r(a,m,k)}else u=createjs.Tween.get(l,{loop:!1}).to({rotation:0},50,createjs.Ease.bounceOut).call(function(){h(),createjs.Tween.removeTweens(u)}),o(m)}}function r(e,i,n){function a(){v.x+=i,t(i,e+j+452)}v=new createjs.Bitmap(Resource.get("index_files/longtraces.png")),k.addChild(v),v.width=452,v.height=14,v.regX=452,v.regY=-17,v.x=l.x,v.y=l.y,createjs.Ticker.addEventListener("tick",a),setTimeout(function(){c(l.x,l.y,"slide"),createjs.Ticker.removeEventListener("tick",a),s(e+j+452)},n);var r=new createjs.Shape;r.graphics.setStrokeStyle(5,"round","round"),r.graphics.beginFill("#FF0000").drawRect(0,0,460,40),r.graphics.endStroke(),r.x=200,r.y=790,v.mask=r}function o(e){function i(){t.x+=e,n+=e,n>2*x/3&&(Main.log("回收痕迹"),createjs.Ticker.removeEventListener("tick",i),k.removeChild(t))}var n=0,t=new createjs.Bitmap(Resource.get("index_files/traces.png"));k.addChild(t),t.width=145,t.height=45,t.regX=92,t.regY=-18,t.x=l.x,t.y=l.y,createjs.Ticker.removeEventListener("tick",i),createjs.Ticker.addEventListener("tick",i)}function c(e,i,n){Main.stage.removeChild(l);var t=Main.gameOverPenguinSS;l=new createjs.Sprite(t),Main.stage.addChild(l),l.gotoAndPlay(n),l.x=e-120,l.y=i-112}function s(e){Main.fire("gameOver",e,l.x)}function g(){createjs.Ticker.removeEventListener("tick",n)}function h(){g(),n(),createjs.Ticker.addEventListener("tick",n)}function d(e){return Math.PI/180*e}function f(e){return e*e}var l,M,u,v,p=7,m=100,k=Main.stage,y=Main.fps,j=0,w=0,x=Main.width,T=Main.height,S=Main.speed*(.2*Math.random()+.8)*p,L=0,C=9.8*m,E=Main.penguinOffsetX,b=Main.height-Main.floorLine+32,O=Main.visibleDistance,X=0,F=Main.floorLine-Main.penguin.y-Main.penguinHeight/2;Main.on("replay",function(){v&&(Main.log("longTracerDisp"),k.removeChild(v)),k.removeChild(l),l=null,g()}),i(e)};