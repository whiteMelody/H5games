!
function($) {
    function t() {
        $("#body-1").show()
    }
    function e() {
        function e() {
            ih5game.progress(100, "资源加载完毕").splashscreen(300)
            //t()
        }
        function i(t) {
            var e = t.currentTarget._numItemsLoaded,
            i = t.currentTarget._numItems;
            ih5game.progress(parseInt(e / i * 100, 10), "已加载资源 " + e + "/" + i)
        }
        var s = new createjs.LoadQueue;
        s.installPlugin(createjs.Sound),
        s.on("complete", e, this),
        s.on("progress", i, this),
        s.loadManifest([{
            id: "m1",
            src: "images/m-1.mp3"
        },
        {
            id: "bg",
            src: "images/bg.jpg"
        },
        {
            id: "bg2",
            src: "images/bg2.jpg"
        },
        {
            id: "ship",
            src: "images/shi.jpg"
        },
        {
            id: "baoshi",
            src: "images/baoshi.jpg"
        },
        {
            id: "wa-1",
            src: "images/wa-1.png"
        },
        {
            id: "wa-2",
            src: "images/wa-2.png"
        },
        {
            id: "wa-3",
            src: "images/wa-3.png"
        },
        {
            id: "wa-4",
            src: "images/wa-4.png"
        },
        {
            id: "lst1",
            src: "images/l-1.png"
        },
        {
            id: "lst2",
            src: "images/l-2.png"
        },
        {
            id: "lst3",
            src: "images/l-3.png"
        },
        {
            id: "bbox",
            src: "images/bbox.png"
        },
        {
            id: "score",
            src: "images/score.jpg"
        },
        {
            id: "try",
            src: "images/try.gif"
        },
        {
            id: "shi-ico",
            src: "images/shi-ico.png"
        },
        {
            id: "baoshi-ico",
            src: "images/baoshi-ico.png"
        },
        {
            id: "g1.gif",
            src: "images/g1.gif"
        }]),
        ih5game.splashscreen(!0)
    }
    var i = $(window).width() / 640,
    s = "挖掘机技术到底哪家强？我的机机猛挖了{height}米！超过全国{rate}%的人!";
    $("#surprisedBtn").on("touchstart",
    function() {
        clickMore();
    });
    var a = function() {
        function t() {
            if (d || r(), d) {
                g += 1;
                var t = parseInt(m.css("top"), 10) + c;
                m.wa();
                var e;
                if (t > 273) {
                    f.next();
                    var i = parseInt(u.css("background-position-y"), 10) - c;
                    u.css({
                        "background-position-y": i + "px"
                    }),
                    e = parseInt(h.css("height"), 10) + c;
                    var s = parseInt(h.css("top"), 10) - c;
                    h.css("height", e),
                    h.css("top", s)
                } else m.css({
                    top: t + "px"
                }),
                e = parseInt(h.css("height"), 10) + c,
                h.css("height", e)
            }
        }
        function e() {
            $("#finishImgShi, #finishImgGem").hide(),
            $("#excavatorReady, #excavatorRun").css("top", 470 * i - $("#excavatorReady").height() + 22 * i),
            $("#excavatorReady").show(),
            $("#excavatorRun").hide(),
            $("#excavatorRun").css({
                "margin-top": $("#excavatorReady").css("margin-top"),
                "margin-left": $("#excavatorReady").css("margin-left")
            }),
            g = 0,
            p = 0;
            var t = $("#excavatorRun").width();
            h.css("width", t - 20),
            h.css("top", 470 * i + 2),
            h.css("height", 0),
            u.css({
                "background-position-y": "0px"
            }),
            $("#lastRunTime").text(10)
        }
        function a(t) {
            return 3 > t ? [10, "没挖几下机机就断了"] : 20 > t ? [32, "机机刚有快感就软啦。"] : 40 > t ? [48, "机机略软凑合挖。"] : 60 > t ? [65, "机机感觉萌萌哒。"] : 80 > t ? [80, "机机根本停不下来!"] : 100 > t ? [92, "机机在手，雄风抖擞！"] : 120 > t ? [94, "妹子看到我的速度都要尖叫！"] : 140 > t ? [96, "哥的操机能力，已是江湖传说。"] : 160 > t ? [98, "，机机一抖，世界颤抖！"] : 200 > t ? [99, "，通过挖掘机技术考试毕业！"] : [99, "哥已通过挖掘机技术考试毕业！"]
        }
        function n() {
            var t = 371 * g;
            $("#lastTime321").hide(),
            $("#body-2").hide(),
            $("#score").text(t),
            $("#score-scale").text(a(g)[0] + "%"),
            $("#body-3").show(),
            $("#resultNoticeText").text(a(g)[1]),
            f.finish(),
            d = !1,
            setTimeout(function() {
                $("#body-3").hide(),
                $("#body-4").show()
            },
            2e3);
            dp_submitScore(t, a(g)[0])
        }
        function o() {
            p = 2,
            d = !0,
            $("#excavatorReady,#excavatorReadyTips").hide(),
            $("#excavatorRun").show(),
            t()
        }
        function r() {
            if (1 != p) {
                p = 1;
                var t = function(e) {
                    3 >= e && e > 0 && $("#lastTime321").attr("src", "images/l-" + e + ".png").show(),
                    $("#lastRunTime").text(e),
                    e > 0 ? setTimeout(function() {
                        t(e - 1)
                    },
                    1e3) : n()
                };
                f.init(parseInt(100 * Math.random(), 10) % 2);
                var e = (f.getMusic(), document.getElementById("startGameVideo"));
                4 == e.readyState && "undefined" != typeof e.currentTime && (e.currentTime = 0),
                e.play();
                var i = 20,
                s = function() {
                    i--<0 || e.currentTime > 0 ? (o(), setTimeout(function() {
                        t(10)
                    },
                    1e3)) : setTimeout(s, 50)
                };
                setTimeout(s, 50)
            }
        }
        var c = 50,
        g = 0,
        m = $("#excavatorRun"),
        u = $("#startLayer"),
        h = $("#excavatorChannel"),
        d = !1,
        p = 0,
        f = function() {
            function t() {
                $("#counterXiang").text(c.x),
                $("#counterGem").text(c.g)
            }
            function e() {
                var e = parseInt(100 * Math.random(), 10) % 10;
                if (5 > e) {
                    e %= 2;
                    var i = r[e];
                    0 === o ? c.g >= c.x && (i = r[0]) : c.x >= c.g && (i = r[1]),
                    n.css({
                        top: parseInt(m.css("top"), 10) + 50
                    }),
                    n.attr("src", i.img).show(),
                    c[i.group] += 10,
                    setTimeout(function() {
                        n.attr("src", "").hide()
                    },
                    300),
                    t()
                }
            }
            function i(e) {
                o = e,
                c.x = c.g = 0,
                t()
            }
            function s() {
                return r[o].music
            }
            function a() {
                $("#finishImg").attr("src", r[o].img2),
                setTimeout(function() {
                    c.x = c.g = 0,
                    t()
                },
                2e3)
            }
            var n = $("#baoWrap"),
            o = 1,
            r = [{
                img: "images/bao-bianbian.gif",
                group: "x",
                music: "images/m-0.mp3",
                img2: "images/shi.jpg"
            },
            {
                img: "images/bao-gem.gif",
                group: "g",
                music: "images/m-1.mp3",
                img2: "images/baoshi.jpg"
            }],
            c = {
                x: 0,
                g: 0
            };
            return {
                init: i,
                getMusic: s,
                next: e,
                finish: a
            }
        } ();
        return m.wa = function() {
            setTimeout(function() {
                m.attr("src", "images/wa-2.png")
            },
            80),
            setTimeout(function() {
                m.attr("src", "images/wa-3.png")
            },
            160),
            setTimeout(function() {
                m.attr("src", "images/wa-4.png")
            },
            240),
            setTimeout(function() {
                m.attr("src", "images/g1.gif")
            },
            300)
        },
        {
            ready: e,
            start: r,
            move: t
        }
    } ();
    $(function() {
        e(),
        document.getElementById("startGameVideo").load(),
        $("#body-1").on("touchstart",
        function() {
            $("#body-1").hide(),
            $("#body-2").show(),
            a.ready()
        }),
        $(".touch-area").on("touchstart",
        function() {
            a.move()
        }),
        $("#trya").on("touchstart",
        function() {
            $("#body-4").hide(),
            $("#body-2").show(),
            a.ready()
        }),
        $("#tshare").on("touchstart",
        function() {
            dp_share();
        })
    })
} (jQuery);