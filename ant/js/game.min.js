function getQueryString(t) {
    return window && window.location ? (t = RegExp("(^|&)" + t + "=([^&]*)(&|$)", "i"), t = window.location.search.substr(1).match(t), null != t ? unescape(t[2]) : null) : null
}
if (cc.sys._supportWebAudio) {
    var _ctx = cc.webAudioContext = new (window.AudioContext || window.webkitAudioContext || window.mozAudioContext);
    cc.WebAudio = cc.Class.extend({_events: null,_buffer: null,_sourceNode: null,_volumeNode: null,src: null,preload: null,autoplay: null,controls: null,mediagroup: null,currentTime: 0,startTime: 0,duration: 0,_loop: null,_volume: 1,_pauseTime: 0,_paused: !1,_stopped: !0,_loadState: -1,ctor: function(t) {
            this._events = {}, this.src = t, this._volumeNode = _ctx.createGain ? _ctx.createGain() : _ctx.createGainNode(), this._onSuccess1 = this._onSuccess.bind(this), this._onError1 = this._onError.bind(this)
        },_play: function(t) {
            var e = this._sourceNode = _ctx.createBufferSource(), n = this._volumeNode;
            t = t || 0, e.buffer = this._buffer, n.gain.value = this._volume, e.connect(n), n.connect(_ctx.destination), e.loop = this._loop, this._stopped = this._paused = !1, e.start ? e.start(0, t) : e.noteGrainOn ? (n = e.buffer.duration, this.loop ? e.noteGrainOn(0, t, n) : e.noteGrainOn(0, t, n - t)) : e.noteOn(0), this._pauseTime = 0
        },_stop: function() {
            var t = this._sourceNode;
            this._stopped || (t.stop ? t.stop(0) : t.noteOff(0), this._stopped = !0)
        },play: function() {
            if (-1 == this._loadState)
                this._loadState = 0;
            else if (1 == this._loadState) {
                var t = this._sourceNode;
                (this._stopped || !t || 2 != t.playbackState) && (this.startTime = _ctx.currentTime, this._play(0))
            }
        },pause: function() {
            this._pauseTime = _ctx.currentTime, this._paused = !0, this._stop()
        },resume: function() {
            this._paused && this._play(this._buffer ? (this._pauseTime - this.startTime) % this._buffer.duration : 0)
        },stop: function() {
            this._pauseTime = 0, this._paused = !1, this._stop()
        },load: function() {
            var t = this;
            if (1 != t._loadState) {
                t._loadState = -1, t.played = !1, t.ended = !0;
                var e = new XMLHttpRequest;
                e.open("GET", t.src, !0), e.responseType = "arraybuffer", e.onload = function() {
                    _ctx.decodeAudioData(e.response, t._onSuccess1, t._onError1)
                }, e.send()
            }
        },addEventListener: function(t, e) {
            this._events[t] = e.bind(this)
        },removeEventListener: function(t) {
            delete this._events[t]
        },canplay: function() {
            return cc.sys._supportWebAudio
        },_onSuccess: function(t) {
            this._buffer = t, t = this._events.success;
            var e = this._events.canplaythrough;
            t && t(), e && e(), (0 == this._loadState || "autoplay" == this.autoplay || 1 == this.autoplay) && this._play(), this._loadState = 1
        },_onError: function() {
            var t = this._events.error;
            t && t(), this._loadState = -2
        },cloneNode: function() {
            var t = new cc.WebAudio(this.src);
            return t.volume = this.volume, t._loadState = this._loadState, t._buffer = this._buffer, (0 == t._loadState || -1 == t._loadState) && t.load(), t
        }});
    var _p = cc.WebAudio.prototype;
    cc.defineGetterSetter(_p, "loop", function() {
        return this._loop
    }, function(t) {
        this._loop = t, this._sourceNode && (this._sourceNode.loop = t)
    }), cc.defineGetterSetter(_p, "volume", function() {
        return this._volume
    }, function(t) {
        this._volume = t, this._volumeNode.gain.value = t
    }), cc.defineGetterSetter(_p, "paused", function() {
        return this._paused
    }), cc.defineGetterSetter(_p, "ended", function() {
        var t = this._sourceNode;
        return !this._paused && (this._stopped || !t || 3 == t.playbackState)
    }), cc.defineGetterSetter(_p, "played", function() {
        var t = this._sourceNode;
        return t && 2 == t.playbackState
    })
}
cc.AudioEngine = cc.Class.extend({_soundSupported: !1,_currMusic: null,_currMusicPath: null,_musicPlayState: 0,_audioID: 0,_effects: {},_audioPool: {},_effectsVolume: 1,_maxAudioInstance: 5,_effectPauseCb: null,_playings: [],ctor: function() {
        this._soundSupported = 0 < cc._audioLoader._supportedAudioTypes.length, this._effectPauseCb && (this._effectPauseCb = this._effectPauseCb.bind(this))
    },willPlayMusic: function() {
        return !1
    },getEffectsVolume: function() {
        return this._effectsVolume
    },playMusic: function(t, e) {
        if (this._soundSupported) {
            var n = this._currMusic;
            n && this._stopAudio(n), t != this._currMusicPath && (this._currMusic = n = this._getAudioByUrl(t), this._currMusicPath = t), n && (n.loop = e || !1, this._playMusic(n))
        }
    },_getAudioByUrl: function(t) {
        var e = cc.loader, n = e.getRes(t);
        return n || (e.load(t), n = e.getRes(t)), n
    },_playMusic: function(t) {
        t.ended || (t.stop ? t.stop() : (t.pause(), t.duration && (t.currentTime = t.duration))), this._musicPlayState = 2, t.play()
    },stopMusic: function(t) {
        if (0 < this._musicPlayState) {
            var e = this._currMusic;
            e && this._stopAudio(e) && (t && cc.loader.release(this._currMusicPath), this._currMusicPath = this._currMusic = null, this._musicPlayState = 0)
        }
    },_stopAudio: function(t) {
        return t && !t.ended ? (t.stop ? t.stop() : (t.pause(), t.duration && (t.currentTime = t.duration)), !0) : !1
    },pauseMusic: function() {
        2 == this._musicPlayState && (this._currMusic.pause(), this._musicPlayState = 1)
    },resumeMusic: function() {
        1 == this._musicPlayState && (this._resumeAudio(this._currMusic), this._musicPlayState = 2)
    },_resumeAudio: function(t) {
        t && !t.ended && (t.resume ? t.resume() : t.play())
    },rewindMusic: function() {
        this._currMusic && this._playMusic(this._currMusic)
    },getMusicVolume: function() {
        return 0 == this._musicPlayState ? 0 : this._currMusic.volume
    },setMusicVolume: function(t) {
        0 < this._musicPlayState && (this._currMusic.volume = Math.min(Math.max(t, 0), 1))
    },isMusicPlaying: function() {
        return 2 == this._musicPlayState && this._currMusic && !this._currMusic.ended
    },_getEffectList: function(t) {
        var e = this._audioPool[t];
        return e || (e = this._audioPool[t] = []), e
    },_getEffect: function(t) {
        var e;
        if (!this._soundSupported)
            return null;
        for (var n = this._getEffectList(t), i = 0, r = n.length; r > i; i++) {
            var s = n[i];
            if (s.ended) {
                e = s, e.currentTime = 0, window.chrome && e.load();
                break
            }
        }
        if (!e) {
            if (n.length >= this._maxAudioInstance)
                return cc.log("Error: " + t + " greater than " + this._maxAudioInstance), null;
            if (e = this._getAudioByUrl(t), !e)
                return null;
            e = e.cloneNode(!0), this._effectPauseCb && cc._addEventListener(e, "pause", this._effectPauseCb), e.volume = this._effectsVolume, n.push(e)
        }
        return e
    },playEffect: function(t, e) {
        var n = this._getEffect(t);
        if (!n)
            return null;
        n.loop = e || !1, n.play();
        var i = this._audioID++;
        return this._effects[i] = n, i
    },setEffectsVolume: function(t) {
        t = this._effectsVolume = Math.min(Math.max(t, 0), 1);
        var e, n = this._effects;
        for (e in n)
            n[e].volume = t
    },pauseEffect: function(t) {
        (t = this._effects[t]) && !t.ended && t.pause()
    },pauseAllEffects: function() {
        var t, e = this._effects;
        for (t in e) {
            var n = e[t];
            n.ended || n.pause()
        }
    },resumeEffect: function(t) {
        this._resumeAudio(this._effects[t])
    },resumeAllEffects: function() {
        var t, e = this._effects;
        for (t in e)
            this._resumeAudio(e[t])
    },stopEffect: function(t) {
        this._stopAudio(this._effects[t]), delete this._effects[t]
    },stopAllEffects: function() {
        var t, e = this._effects;
        for (t in e)
            this._stopAudio(e[t]), delete e[t]
    },unloadEffect: function(t) {
        var e = cc.loader, n = this._effects, i = this._getEffectList(t);
        if (e.release(t), 0 != i.length) {
            e = i[0].src, delete this._audioPool[t];
            for (var r in n)
                n[r].src == e && (this._stopAudio(n[r]), delete n[r])
        }
    },end: function() {
        this.stopMusic(), this.stopAllEffects()
    },_pausePlaying: function() {
        var t, e, n = this._effects;
        for (e in n)
            !(t = n[e]) || t.ended || t.paused || (this._playings.push(t), t.pause());
        this.isMusicPlaying() && (this._playings.push(this._currMusic), this._currMusic.pause())
    },_resumePlaying: function() {
        for (var t = this._playings, e = 0, n = t.length; n > e; e++)
            this._resumeAudio(t[e]);
        t.length = 0
    }}), !cc.sys._supportWebAudio && 0 > cc.sys._supportMultipleAudio && (cc.AudioEngineForSingle = cc.AudioEngine.extend({_waitingEffIds: [],_pausedEffIds: [],_currEffect: null,_maxAudioInstance: 2,_effectCache4Single: {},_needToResumeMusic: !1,_expendTime4Music: 0,_isHiddenMode: !1,_playMusic: function(t) {
        this._stopAllEffects(), this._super(t)
    },resumeMusic: function() {
        1 == this._musicPlayState && (this._stopAllEffects(), this._needToResumeMusic = !1, this._expendTime4Music = 0, this._super())
    },playEffect: function(t, e) {
        var n = this._currEffect, i = e ? this._getEffect(t) : this._getSingleEffect(t);
        if (!i)
            return null;
        i.loop = e || !1;
        var r = this._audioID++;
        return this._effects[r] = i, this.isMusicPlaying() && (this.pauseMusic(), this._needToResumeMusic = !0), n ? (n != i && this._waitingEffIds.push(this._currEffectId), this._waitingEffIds.push(r), n.pause()) : (this._currEffect = i, this._currEffectId = r, i.play()), r
    },pauseEffect: function() {
        cc.log("pauseEffect not supported in single audio mode!")
    },pauseAllEffects: function() {
        var t = this._waitingEffIds, e = this._pausedEffIds, n = this._currEffect;
        if (n) {
            for (var i = 0, r = t.length; r > i; i++)
                e.push(t[i]);
            t.length = 0, e.push(this._currEffectId), n.pause()
        }
    },resumeEffect: function() {
        cc.log("resumeEffect not supported in single audio mode!")
    },resumeAllEffects: function() {
        var t = this._waitingEffIds, e = this._pausedEffIds;
        this.isMusicPlaying() && (this.pauseMusic(), this._needToResumeMusic = !0);
        for (var n = 0, i = e.length; i > n; n++)
            t.push(e[n]);
        e.length = 0, !this._currEffect && 0 <= t.length && (t = t.pop(), e = this._effects[t]) && (this._currEffectId = t, this._currEffect = e, this._resumeAudio(e))
    },stopEffect: function(t) {
        var e = this._currEffect, n = this._waitingEffIds, i = this._pausedEffIds;
        e && this._currEffectId == t ? this._stopAudio(e) : (e = n.indexOf(t), e >= 0 ? n.splice(e, 1) : (e = i.indexOf(t), e >= 0 && i.splice(e, 1)))
    },stopAllEffects: function() {
        this._stopAllEffects(), !this._currEffect && this._needToResumeMusic && (this._resumeAudio(this._currMusic), this._musicPlayState = 2, this._needToResumeMusic = !1, this._expendTime4Music = 0)
    },unloadEffect: function(t) {
        var e = cc.loader, n = this._effects, i = this._effectCache4Single, r = this._getEffectList(t), s = this._currEffect;
        if (e.release(t), 0 != r.length || i[t]) {
            e = 0 < r.length ? r[0].src : i[t].src, delete this._audioPool[t], delete i[t];
            for (var o in n)
                n[o].src == e && delete n[o];
            s && s.src == e && this._stopAudio(s)
        }
    },_getSingleEffect: function(t) {
        var e = this._effectCache4Single[t], n = this._waitingEffIds, i = this._pausedEffIds, r = this._effects;
        if (e)
            e.duration && (e.currentTime = 0);
        else {
            if (e = this._getAudioByUrl(t), !e)
                return null;
            e = e.cloneNode(!0), this._effectPauseCb && cc._addEventListener(e, "pause", this._effectPauseCb), e.volume = this._effectsVolume, this._effectCache4Single[t] = e
        }
        t = 0;
        for (var s = n.length; s > t; )
            r[n[t]] == e ? n.splice(t, 1) : t++;
        for (t = 0, s = i.length; s > t; )
            r[i[t]] == e ? i.splice(t, 1) : t++;
        return e._isToPlay = !0, e
    },_stopAllEffects: function() {
        var t = this._currEffect, e = this._audioPool, n = this._effectCache4Single, i = this._waitingEffIds, r = this._pausedEffIds;
        if (t || 0 != i.length || 0 != r.length) {
            for (var s in n) {
                var o = n[s];
                o.duration && (o.currentTime = o.duration)
            }
            i.length = 0, r.length = 0;
            for (s in e)
                for (n = e[s], i = 0, r = n.length; r > i; i++)
                    o = n[i], o.loop = !1, o.duration && (o.currentTime = o.duration);
            t && this._stopAudio(t)
        }
    },_effectPauseCb: function() {
        if (!this._isHiddenMode) {
            var t = this._getWaitingEffToPlay();
            if (t)
                t._isToPlay ? (delete t._isToPlay, t.play()) : this._resumeAudio(t);
            else if (this._needToResumeMusic) {
                if (t = this._currMusic, t.duration) {
                    var e = t.currentTime + this._expendTime4Music, e = e - t.duration * (e / t.duration | 0);
                    t.currentTime = e
                }
                this._expendTime4Music = 0, this._resumeAudio(t), this._musicPlayState = 2, this._needToResumeMusic = !1
            }
        }
    },_getWaitingEffToPlay: function() {
        var t = this._waitingEffIds, e = this._effects, n = this._currEffect, i = n ? n.currentTime - (n.startTime || 0) : 0;
        for (this._expendTime4Music += i; 0 != t.length; ) {
            var r = t.pop();
            if (n = e[r]) {
                if (n._isToPlay || n.loop || n.duration && n.currentTime + i < n.duration)
                    return this._currEffectId = r, this._currEffect = n, !n._isToPlay && n.duration && (t = n.currentTime + i, t -= n.duration * (t / n.duration | 0), n.currentTime = t), n._isToPlay = !1, n;
                n.duration && (n.currentTime = n.duration)
            }
        }
        return this._currEffect = this._currEffectId = null
    },_pausePlaying: function() {
        var t = this._currEffect;
        this._isHiddenMode = !0, (t = 2 == this._musicPlayState ? this._currMusic : t) && (this._playings.push(t), t.pause())
    },_resumePlaying: function() {
        var t = this._playings;
        this._isHiddenMode = !1, 0 < t.length && (this._resumeAudio(t[0]), t.length = 0)
    }})), cc._audioLoader = {_supportedAudioTypes: null,getBasePath: function() {
        return cc.loader.audioPath
    },_load: function(t, e, n, i, r, s, o) {
        var c = this, u = cc.loader, a = cc.path, l = this._supportedAudioTypes, h = "";
        if (0 == l.length)
            return o("can not support audio!");
        if (-1 == i)
            h = (a.extname(t) || "").toLowerCase(), c.audioTypeSupported(h) || (h = l[0], i = 0);
        else {
            if (!(i < l.length))
                return o("can not found the resource of audio! Last match url is : " + t);
            h = l[i]
        }
        return 0 <= r.indexOf(h) ? c._load(t, e, n, i + 1, r, s, o) : (t = a.changeExtname(t, h), r.push(h), s = c._loadAudio(t, s, function(u) {
            return u ? c._load(t, e, n, i + 1, r, s, o) : void o(null, s)
        }), void (u.cache[e] = s))
    },audioTypeSupported: function(t) {
        return t ? 0 <= this._supportedAudioTypes.indexOf(t.toLowerCase()) : !1
    },_loadAudio: function(t, e, n) {
        var i = "file://" == location.origin ? Audio : cc.WebAudio || Audio;
        return 2 == arguments.length ? (n = e, e = new i) : 3 == arguments.length && !e && (e = new i), e.src = t, e.preload = "auto", i = navigator.userAgent, /Mobile/.test(i) && (/iPhone OS/.test(i) || /iPad/.test(i) || /Firefox/.test(i)) || /MSIE/.test(i) ? (e.load(), n(null, e)) : (cc._addEventListener(e, "canplaythrough", function() {
            n(null, e), this.removeEventListener("canplaythrough", arguments.callee, !1), this.removeEventListener("error", arguments.callee, !1)
        }, !1), cc._addEventListener(e, "error", function() {
            n("load " + t + " failed"), this.removeEventListener("canplaythrough", arguments.callee, !1), this.removeEventListener("error", arguments.callee, !1)
        }, !1), e.load()), e
    },load: function(t, e, n, i) {
        this._load(t, e, n, -1, [], null, i)
    }}, cc._audioLoader._supportedAudioTypes = function() {
    var t = cc.newElement("audio"), e = [];
    if (t.canPlayType) {
        var n = function(e) {
            return e = t.canPlayType(e), "no" != e && "" != e
        };
        n('audio/ogg; codecs="vorbis"') && e.push(".ogg"), n("audio/mpeg") && e.push(".mp3"), n('audio/wav; codecs="1"') && e.push(".wav"), n("audio/mp4") && e.push(".mp4"), (n("audio/x-m4a") || n("audio/aac")) && e.push(".m4a")
    }
    return e
}(), cc.loader.register(["mp3", "ogg", "wav", "mp4", "m4a"], cc._audioLoader), cc.audioEngine = cc.AudioEngineForSingle ? new cc.AudioEngineForSingle : new cc.AudioEngine, cc.eventManager.addCustomListener(cc.game.EVENT_HIDE, function() {
    cc.audioEngine._pausePlaying()
}), cc.eventManager.addCustomListener(cc.game.EVENT_SHOW, function() {
    cc.audioEngine._resumePlaying()
});
var bs = bs || {};
bs.System = {messageBox: function() {
    },measureStringWidth: function() {
        return this
    },openUrl: function() {
    },countStringCanDisplayInWidth: function() {
        return this
    },setRateAppDelegate: function() {
    },getDeviceIdfa: function() {
        return this
    },UTFStringBytes: function() {
        return this
    },getDeviceID: function() {
        return this
    },rateApp: function() {
    },copyToClipboard: function() {
    },getTimeOfDay: function() {
        return this
    },getSystemUpTime: function() {
        return this
    },isRetina: function() {
        return this
    },urlEncode: function() {
        return this
    },generateOrderID: function() {
        return this
    },getPackageName: function() {
        return this
    },calcStringLength: function() {
        return this
    },md5: function() {
        return this
    },getCurrentVersion: function() {
        return this
    },logMemoryUsage: function() {
    },compareVersion: function() {
        return this
    },isUsingWifi: function() {
        return this
    },showRateAppAlert: function() {
    },getDeviceMac: function() {
        return this
    }}, bs.Notification = {destroy: function() {
    },init: function() {
        return this
    },cancelAllNotification: function() {
    },scheduleNotification: function() {
    },shared: function() {
        return this
    },BSNotification: function() {
    }}, bs.Umeng = {feedback: function() {
    },getConfigParam: function() {
        return this
    },checkUpdate: function() {
    },failLevel: function() {
    },logEvent: function() {
    },getChannel: function() {
        return this
    },setIsUpdated: function() {
    },init: function() {
        return this
    },setVersionKey: function() {
    },startWithAppKey: function() {
    },getIsUpdated: function() {
        return this
    },logPurchase: function() {
    },destroy: function() {
    },getAppKey: function() {
        return this
    },startLevel: function() {
    },finishLevel: function() {
    },logRecharge: function() {
    },isInReview: function() {
        return this
    },shared: function() {
        return this
    },BSUmeng: function() {
    }}, bs.TencentMTA = {setPlayerLevel: function() {
    },trackRecharge: function() {
    },trackLevelUp: function() {
    },trackEvent: function() {
    },trackRaid: function() {
    },startWithAppKey: function() {
    },trackLogout: function() {
    },setDebugEnable: function() {
    },isInReview: function() {
        return this
    },trackRegister: function() {
    },getConfigParam: function() {
        return this
    },setPlayerId: function() {
    },init: function() {
        return this
    },destroy: function() {
    },trackConsumeItem: function() {
    },trackPurchaseItem: function() {
    },getChannel: function() {
        return this
    },setExchangeRate: function() {
    },trackLogin: function() {
    },trackTask: function() {
    },getAppKey: function() {
        return this
    },trackPurchaseOther: function() {
    },shared: function() {
        return this
    },BSTencentMTA: function() {
    }}, bs.Share = {registerApp: function() {
    },shareVideo: function() {
    },shareImage: function() {
    },shareURL: function() {
    },init: function() {
        return this
    },onShareSuccess: function() {
    },destroy: function() {
    },shared: function() {
        return this
    },BSShare: function() {
    }}, bs.ShareQQ = {destroy: function() {
    },init: function() {
        return this
    },registerApp: function() {
    },shared: function() {
        return this
    },BSShareQQ: function() {
    }}, bs.AsyncRemoteSprite = {textureLoaded: function() {
    },create: function() {
        return this
    },BSAsyncRemoteSprite: function() {
    }}, bs.Social = {invite: function() {
    },getType: function() {
        return this
    },initWithAppId: function() {
    },isLogin: function() {
        return this
    },login: function() {
    },queryUserInfo: function() {
    },BSSocial: function() {
    }}, bs.SocialQQ = {getType: function() {
        return this
    },shared: function() {
        return this
    }}, bs.SocialWechat = {setCode: function() {
    },getType: function() {
        return this
    },getCode: function() {
        return this
    },shared: function() {
        return this
    }}, bs.SocialWeibo = {getType: function() {
        return this
    },shared: function() {
        return this
    }}, bs.Config = {decrypt: function() {
        return this
    },init: function() {
        return this
    },setKey: function() {
    },loadConf: function() {
        return this
    },destroy: function() {
    },shared: function() {
        return this
    },BSConfig: function() {
    }}, bs.PlatformImpl = {feedback: function() {
    },setPlatformDelegate: function() {
    },getPlatformName: function() {
        return this
    },setLoginStateToTrue: function() {
    },restorePurchase: function() {
    },getProductID: function() {
        return this
    },quitGame: function() {
    },getUserBalance: function() {
        return this
    },setIsInited: function() {
    },setAppIdAndKey: function() {
    },accountManagement: function() {
    },init: function() {
        return this
    },getUserNickName: function() {
        return this
    },setPlatformType: function() {
    },setProductID: function() {
    },getPlatformDelegate: function() {
        return this
    },getisVersionChecked: function() {
        return this
    },setRechargeAddr: function() {
    },getisFirstLogin: function() {
        return this
    },social: function() {
    },setisVersionChecked: function() {
    },getRechargeAddr: function() {
        return this
    },setOrderID: function() {
    },updateVersion: function() {
    },enterAppBBS: function() {
    },getIsInited: function() {
        return this
    },buyGoodConfirm: function() {
    },onEnterForeground: function() {
    },setisFirstLogin: function() {
    },setPlatformName: function() {
    },buyGood: function() {
    },setIsDebugMode: function() {
    },getLoginState: function() {
        return this
    },isLogined: function() {
        return this
    },getUserID: function() {
        return this
    },getPlatformType: function() {
        return this
    },getOrderID: function() {
        return this
    },login: function() {
    },BSPlatformImpl: function() {
    }}, bs.Platform = {setPlatformImpl: function() {
    },shared: function() {
        return this
    }}, bs.Sound = {stopAllEffects: function() {
    },switchMusicMute: function() {
    },setEffectVolume: function() {
    },setMusicVolume: function() {
    },setIsMusicMute: function() {
    },stopEffect: function() {
    },getEffectVolume: function() {
        return this
    },pushMusic: function() {
        return this
    },getMusicVolume: function() {
        return this
    },stopMusic: function() {
    },dump: function() {
    },getIsMute: function() {
        return this
    },setIsEffectMute: function() {
    },playMusic: function() {
    },setIsMute: function() {
    },popMusic: function() {
    },destroy: function() {
    },getIsMusicMute: function() {
        return this
    },configure: function() {
    },playEffect: function() {
        return this
    },active: function() {
    },switchEffectMute: function() {
    },init: function() {
        return this
    },getIsEffectMute: function() {
        return this
    },shared: function() {
        return this
    },BSSound: function() {
    }}, bs.Ad = {destroy: function() {
    },init: function() {
        return this
    },showAd: function() {
    },setID: function() {
    },shared: function() {
        return this
    },BSAd: function() {
    }}, bs.OfferWall = {setID: function() {
    },showWall: function() {
    },consumeAllPoints: function() {
    }}, bs.OfferWallAdwo = {consumeAllPoints: function() {
    },init: function() {
        return this
    },showWall: function() {
    },destroy: function() {
    },setID: function() {
    },shared: function() {
        return this
    },BSOfferWallAdwo: function() {
    }}, bs.OfferWallDM = {consumeAllPoints: function() {
    },init: function() {
        return this
    },showWall: function() {
    },destroy: function() {
    },setID: function() {
    },shared: function() {
        return this
    },BSOfferWallDM: function() {
    }}, bs.OfferWallYjf = {consumeAllPoints: function() {
    },init: function() {
        return this
    },showWall: function() {
    },destroy: function() {
    },setID: function() {
    },shared: function() {
        return this
    },BSOfferWallYjf: function() {
    }}, bs.OfferWallDianRu = {consumeAllPoints: function() {
    },init: function() {
        return this
    },showWall: function() {
    },destroy: function() {
    },setID: function() {
    },shared: function() {
        return this
    },BSOfferWallDianRu: function() {
    }}, bs.Coupon = {setServer: function() {
    },useCoupon: function() {
    },setProduct: function() {
    },init: function() {
        return this
    },destroy: function() {
    },shared: function() {
        return this
    },BSCoupon: function() {
    }}, bs.Pay = {getPlayerId: function() {
        return this
    },setPayCode: function() {
    },getIsSandbox: function() {
        return this
    },setIsSandbox: function() {
    },recordOrder: function() {
    },getPayMethod: function() {
        return this
    },setServerId: function() {
    },getPayCode: function() {
        return this
    },setPrice: function() {
    },setPlayerId: function() {
    },init: function() {
        return this
    },getProductId: function() {
        return this
    },destroy: function() {
    },getPrice: function() {
        return this
    },setPayData: function() {
    },onRecordOrder: function() {
    },getServerId: function() {
        return this
    },setPayMethod: function() {
    },restoreProduct: function() {
    },getOrderId: function() {
        return this
    },setProductId: function() {
    },getPayData: function() {
        return this
    },setOrderId: function() {
    },setPaySecret: function() {
    },buyProduct: function() {
    },shared: function() {
        return this
    },BSPay: function() {
    }}, bs.Resource = {unuseResource: function() {
    },setThreadCount: function() {
    },getThreadCount: function() {
        return this
    },checkUpdate: function() {
    },setMaxThreadCount: function() {
    },getStatus: function() {
        return this
    },setRemoteHost: function() {
    },setStatus: function() {
    },getRemoteHost: function() {
        return this
    },init: function() {
        return this
    },startUpdate: function() {
    },getMaxThreadCount: function() {
        return this
    },destroy: function() {
    },getUpdateDurationMS: function() {
        return this
    },getCacheFilePath: function() {
        return this
    },useResource: function() {
    },shared: function() {
        return this
    },BSResource: function() {
    }}, bs.Promotion = {setServer: function() {
    },sendInfo: function() {
    },init: function() {
        return this
    },destroy: function() {
    },shared: function() {
        return this
    },BSPromotion: function() {
    }}, bs.KTPlay = {handleOpenURL: function() {
    },setAppKeyAndSecret: function() {
    },show: function() {
    },isEnabled: function() {
        return this
    },dismiss: function() {
    },isShowing: function() {
        return this
    },init: function() {
        return this
    },destroy: function() {
    },shared: function() {
        return this
    },BSKTPlay: function() {
    }}, bs.AsyncRemoteSprite = cc.Sprite.extend({_preferredSize: null,initWithUrlAndSize: function(t, e) {
        this.initWithFile(t), this._preferredSize = e
    },onEnter: function() {
        this._super(), this._preferredSize && (0 !== this.getContentSize().width ? bs.scaleToSize(this, this._preferredSize) : this.schedule(function() {
            0 !== this.getContentSize().width && (bs.scaleToSize(this, this._preferredSize), this.unscheduleAllCallbacks())
        }.bind(this), .01))
    }}), bs.AsyncRemoteSprite.create = function(t, e, n) {
    return n = new bs.AsyncRemoteSprite, n.initWithUrlAndSize(t, e), n
}, bs.System.getDeviceID = function() {
    var t = cc.sys.localStorage.getItem("device_id");
    return t ? t : (t = bs.guid(), cc.sys.localStorage.setItem("device_id", t), t)
}, bs.System.getSystemUpTime = function() {
    return Math.ceil((new Date).getTime() / 1e3)
}, bs.System.currentTimeMillis = function() {
    return (new Date).getTime()
}, bs.System.getServerTime = function(t) {
    bs.Http.get("http://week.pictoword.hortorgame.com/week/serverTime", function(e, n) {
        if (e)
            t(e, null);
        else {
            var i = parseInt(n);
            isNaN(i) || 0 > i ? (cc.log("[BSHTTP] server time request error:" + JSON.stringify(n)), t("", null)) : t(null, i)
        }
    })
}, bs.platform = "html5", bs.platformpay = "appstore", bs._ResourceClass = cc.Class.extend({_resUsed: null,init: function() {
        this._resUsed = {}
    },useResource: function(t) {
        this._resUsed[t] || (this._resUsed[t] = 0, cc.spriteFrameCache.addSpriteFrames(t)), this._resUsed[t]++
    },unuseResource: function(t) {
        this._resUsed[t]--, 0 == this._resUsed[t] && cc.spriteFrameCache.removeSpriteFramesFromFile(t)
    }}), bs.Resource = {_instance: null,shared: function() {
        return this._instance || (this._instance = new bs._ResourceClass, this._instance.init()), this._instance
    }}, function() {
    var t = this, e = t._, n = {}, i = Array.prototype, r = Object.prototype, s = i.push, o = i.slice, c = i.concat, u = r.toString, a = r.hasOwnProperty, l = i.forEach, h = i.map, f = i.reduce, d = i.reduceRight, p = i.filter, g = i.every, m = i.some, _ = i.indexOf, b = i.lastIndexOf, r = Array.isArray, y = Object.keys, S = Function.prototype.bind, v = function(t) {
        return t instanceof v ? t : this instanceof v ? void (this._wrapped = t) : new v(t)
    };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = v), exports._ = v) : t._ = v, v.VERSION = "1.6.0";
    var w = v.each = v.forEach = function(t, e, i) {
        if (null == t)
            return t;
        if (l && t.forEach === l)
            t.forEach(e, i);
        else if (t.length === +t.length) {
            for (var r = 0, s = t.length; s > r; r++)
                if (e.call(i, t[r], r, t) === n)
                    return
        } else
            for (var o = v.keys(t), r = 0, s = o.length; s > r; r++)
                if (e.call(i, t[o[r]], o[r], t) === n)
                    return;
        return t
    };
    v.map = v.collect = function(t, e, n) {
        var i = [];
        return null == t ? i : h && t.map === h ? t.map(e, n) : (w(t, function(t, r, s) {
            i.push(e.call(n, t, r, s))
        }), i)
    }, v.reduce = v.foldl = v.inject = function(t, e, n, i) {
        var r = 2 < arguments.length;
        if (null == t && (t = []), f && t.reduce === f)
            return i && (e = v.bind(e, i)), r ? t.reduce(e, n) : t.reduce(e);
        if (w(t, function(t, s, o) {
            r ? n = e.call(i, n, t, s, o) : (n = t, r = !0)
        }), !r)
            throw new TypeError("Reduce of empty array with no initial value");
        return n
    }, v.reduceRight = v.foldr = function(t, e, n, i) {
        var r = 2 < arguments.length;
        if (null == t && (t = []), d && t.reduceRight === d)
            return i && (e = v.bind(e, i)), r ? t.reduceRight(e, n) : t.reduceRight(e);
        var s = t.length;
        if (s !== +s)
            var o = v.keys(t), s = o.length;
        if (w(t, function(c, u, a) {
            u = o ? o[--s] : --s, r ? n = e.call(i, n, t[u], u, a) : (n = t[u], r = !0)
        }), !r)
            throw new TypeError("Reduce of empty array with no initial value");
        return n
    }, v.find = v.detect = function(t, e, n) {
        var i;
        return T(t, function(t, r, s) {
            return e.call(n, t, r, s) ? (i = t, !0) : void 0
        }), i
    }, v.filter = v.select = function(t, e, n) {
        var i = [];
        return null == t ? i : p && t.filter === p ? t.filter(e, n) : (w(t, function(t, r, s) {
            e.call(n, t, r, s) && i.push(t)
        }), i)
    }, v.reject = function(t, e, n) {
        return v.filter(t, function(t, i, r) {
            return !e.call(n, t, i, r)
        }, n)
    }, v.every = v.all = function(t, e, i) {
        e || (e = v.identity);
        var r = !0;
        return null == t ? r : g && t.every === g ? t.every(e, i) : (w(t, function(t, s, o) {
            return (r = r && e.call(i, t, s, o)) ? void 0 : n
        }), !!r)
    };
    var T = v.some = v.any = function(t, e, i) {
        e || (e = v.identity);
        var r = !1;
        return null == t ? r : m && t.some === m ? t.some(e, i) : (w(t, function(t, s, o) {
            return r || (r = e.call(i, t, s, o)) ? n : void 0
        }), !!r)
    };
    v.contains = v.include = function(t, e) {
        return null == t ? !1 : _ && t.indexOf === _ ? -1 != t.indexOf(e) : T(t, function(t) {
            return t === e
        })
    }, v.invoke = function(t, e) {
        var n = o.call(arguments, 2), i = v.isFunction(e);
        return v.map(t, function(t) {
            return (i ? e : t[e]).apply(t, n)
        })
    }, v.pluck = function(t, e) {
        return v.map(t, v.property(e))
    }, v.where = function(t, e) {
        return v.filter(t, v.matches(e))
    }, v.findWhere = function(t, e) {
        return v.find(t, v.matches(e))
    }, v.max = function(t, e, n) {
        if (!(!e && v.isArray(t) && t[0] === +t[0] && 65535 > t.length)) {
            Math.max.apply(Math, t);
            var i = -1 / 0, r = -1 / 0;
            return w(t, function(t, s, o) {
                s = e ? e.call(n, t, s, o) : t, s > r && (i = t, r = s)
            }), i
        }
    }, v.min = function(t, e, n) {
        if (!e && v.isArray(t) && t[0] === +t[0] && 65535 > t.length)
            return Math.min.apply(Math, t);
        var i = 1 / 0, r = 1 / 0;
        return w(t, function(t, s, o) {
            s = e ? e.call(n, t, s, o) : t, r > s && (i = t, r = s)
        }), i
    }, v.shuffle = function(t) {
        var e, n = 0, i = [];
        return w(t, function(t) {
            e = v.random(n++), i[n - 1] = i[e], i[e] = t
        }), i
    }, v.sample = function(t, e, n) {
        return null == e || n ? (t.length !== +t.length && (t = v.values(t)), t[v.random(t.length - 1)]) : v.shuffle(t).slice(0, Math.max(0, e))
    };
    var M = function(t) {
        return null == t ? v.identity : v.isFunction(t) ? t : v.property(t)
    };
    v.sortBy = function(t, e, n) {
        return e = M(e), v.pluck(v.map(t, function(t, i, r) {
            return {value: t,index: i,criteria: e.call(n, t, i, r)}
        }).sort(function(t, e) {
            var n = t.criteria, i = e.criteria;
            if (n !== i) {
                if (n > i || void 0 === n)
                    return 1;
                if (i > n || void 0 === i)
                    return -1
            }
            return t.index - e.index
        }), "value")
    };
    var C = function(t) {
        return function(e, n, i) {
            var r = {};
            return n = M(n), w(e, function(s, o) {
                var c = n.call(i, s, o, e);
                t(r, c, s)
            }), r
        }
    };
    v.groupBy = C(function(t, e, n) {
        v.has(t, e) ? t[e].push(n) : t[e] = [n]
    }), v.indexBy = C(function(t, e, n) {
        t[e] = n
    }), v.countBy = C(function(t, e) {
        v.has(t, e) ? t[e]++ : t[e] = 1
    }), v.sortedIndex = function(t, e, n, i) {
        n = M(n), e = n.call(i, e);
        for (var r = 0, s = t.length; s > r; ) {
            var o = r + s >>> 1;
            n.call(i, t[o]) < e ? r = o + 1 : s = o
        }
        return r
    }, v.toArray = function(t) {
        return t ? v.isArray(t) ? o.call(t) : t.length === +t.length ? v.map(t, v.identity) : v.values(t) : []
    }, v.size = function(t) {
        return null == t ? 0 : t.length === +t.length ? t.length : v.keys(t).length
    }, v.first = v.head = v.take = function(t, e, n) {
        return null == t ? void 0 : null == e || n ? t[0] : 0 > e ? [] : o.call(t, 0, e)
    }, v.initial = function(t, e, n) {
        return o.call(t, 0, t.length - (null == e || n ? 1 : e))
    }, v.last = function(t, e, n) {
        return null == t ? void 0 : null == e || n ? t[t.length - 1] : o.call(t, Math.max(t.length - e, 0))
    }, v.rest = v.tail = v.drop = function(t, e, n) {
        return o.call(t, null == e || n ? 1 : e)
    }, v.compact = function(t) {
        return v.filter(t, v.identity)
    };
    var E = function(t, e, n) {
        return e && v.every(t, v.isArray) ? c.apply(n, t) : (w(t, function(t) {
            v.isArray(t) || v.isArguments(t) ? e ? s.apply(n, t) : E(t, e, n) : n.push(t)
        }), n)
    };
    v.flatten = function(t, e) {
        return E(t, e, [])
    }, v.without = function(t) {
        return v.difference(t, o.call(arguments, 1))
    }, v.partition = function(t, e) {
        var n = [], i = [];
        return w(t, function(t) {
            (e(t) ? n : i).push(t)
        }), [n, i]
    }, v.uniq = v.unique = function(t, e, n, i) {
        v.isFunction(e) && (i = n, n = e, e = !1), n = n ? v.map(t, n, i) : t;
        var r = [], s = [];
        return w(n, function(n, i) {
            (e ? i && s[s.length - 1] === n : v.contains(s, n)) || (s.push(n), r.push(t[i]))
        }), r
    }, v.union = function() {
        return v.uniq(v.flatten(arguments, !0))
    }, v.intersection = function(t) {
        var e = o.call(arguments, 1);
        return v.filter(v.uniq(t), function(t) {
            return v.every(e, function(e) {
                return v.contains(e, t)
            })
        })
    }, v.difference = function(t) {
        var e = c.apply(i, o.call(arguments, 1));
        return v.filter(t, function(t) {
            return !v.contains(e, t)
        })
    }, v.zip = function() {
        for (var t = v.max(v.pluck(arguments, "length").concat(0)), e = Array(t), n = 0; t > n; n++)
            e[n] = v.pluck(arguments, "" + n);
        return e
    }, v.object = function(t, e) {
        if (null == t)
            return {};
        for (var n = {}, i = 0, r = t.length; r > i; i++)
            e ? n[t[i]] = e[i] : n[t[i][0]] = t[i][1];
        return n
    }, v.indexOf = function(t, e, n) {
        if (null == t)
            return -1;
        var i = 0, r = t.length;
        if (n) {
            if ("number" != typeof n)
                return i = v.sortedIndex(t, e), t[i] === e ? i : -1;
            i = 0 > n ? Math.max(0, r + n) : n
        }
        if (_ && t.indexOf === _)
            return t.indexOf(e, n);
        for (; r > i; i++)
            if (t[i] === e)
                return i;
        return -1
    }, v.lastIndexOf = function(t, e, n) {
        if (null == t)
            return -1;
        var i = null != n;
        if (b && t.lastIndexOf === b)
            return i ? t.lastIndexOf(e, n) : t.lastIndexOf(e);
        for (n = i ? n : t.length; n--; )
            if (t[n] === e)
                return n;
        return -1
    }, v.range = function(t, e, n) {
        1 >= arguments.length && (e = t || 0, t = 0), n = arguments[2] || 1;
        for (var i = Math.max(Math.ceil((e - t) / n), 0), r = 0, s = Array(i); i > r; )
            s[r++] = t, t += n;
        return s
    };
    var x = function() {
    };
    v.bind = function(t, e) {
        var n, i;
        if (S && t.bind === S)
            return S.apply(t, o.call(arguments, 1));
        if (!v.isFunction(t))
            throw new TypeError;
        return n = o.call(arguments, 2), i = function() {
            if (!(this instanceof i))
                return t.apply(e, n.concat(o.call(arguments)));
            x.prototype = t.prototype;
            var r = new x;
            x.prototype = null;
            var s = t.apply(r, n.concat(o.call(arguments)));
            return Object(s) === s ? s : r
        }
    }, v.partial = function(t) {
        var e = o.call(arguments, 1);
        return function() {
            for (var n = 0, i = e.slice(), r = 0, s = i.length; s > r; r++)
                i[r] === v && (i[r] = arguments[n++]);
            for (; n < arguments.length; )
                i.push(arguments[n++]);
            return t.apply(this, i)
        }
    }, v.bindAll = function(t) {
        var e = o.call(arguments, 1);
        if (0 === e.length)
            throw Error("bindAll must be passed function names");
        return w(e, function(e) {
            t[e] = v.bind(t[e], t)
        }), t
    }, v.memoize = function(t, e) {
        var n = {};
        return e || (e = v.identity), function() {
            var i = e.apply(this, arguments);
            return v.has(n, i) ? n[i] : n[i] = t.apply(this, arguments)
        }
    }, v.delay = function(t, e) {
        var n = o.call(arguments, 2);
        return setTimeout(function() {
            return t.apply(null, n)
        }, e)
    }, v.defer = function(t) {
        return v.delay.apply(v, [t, 1].concat(o.call(arguments, 1)))
    }, v.throttle = function(t, e, n) {
        var i, r, s, o = null, c = 0;
        n || (n = {});
        var u = function() {
            c = !1 === n.leading ? 0 : v.now(), o = null, s = t.apply(i, r), i = r = null
        };
        return function() {
            var a = v.now();
            !c && !1 === n.leading && (c = a);
            var l = e - (a - c);
            return i = this, r = arguments, 0 >= l ? (clearTimeout(o), o = null, c = a, s = t.apply(i, r), i = r = null) : !o && !1 !== n.trailing && (o = setTimeout(u, l)), s
        }
    }, v.debounce = function(t, e, n) {
        var i, r, s, o, c, u = function() {
            var a = v.now() - o;
            e > a ? i = setTimeout(u, e - a) : (i = null, n || (c = t.apply(s, r), s = r = null))
        };
        return function() {
            s = this, r = arguments, o = v.now();
            var a = n && !i;
            return i || (i = setTimeout(u, e)), a && (c = t.apply(s, r), s = r = null), c
        }
    }, v.once = function(t) {
        var e, n = !1;
        return function() {
            return n ? e : (n = !0, e = t.apply(this, arguments), t = null, e)
        }
    }, v.wrap = function(t, e) {
        return v.partial(e, t)
    }, v.compose = function() {
        var t = arguments;
        return function() {
            for (var e = arguments, n = t.length - 1; n >= 0; n--)
                e = [t[n].apply(this, e)];
            return e[0]
        }
    }, v.after = function(t, e) {
        return function() {
            return 1 > --t ? e.apply(this, arguments) : void 0
        }
    }, v.keys = function(t) {
        if (!v.isObject(t))
            return [];
        if (y)
            return y(t);
        var e, n = [];
        for (e in t)
            v.has(t, e) && n.push(e);
        return n
    }, v.values = function(t) {
        for (var e = v.keys(t), n = e.length, i = Array(n), r = 0; n > r; r++)
            i[r] = t[e[r]];
        return i
    }, v.pairs = function(t) {
        for (var e = v.keys(t), n = e.length, i = Array(n), r = 0; n > r; r++)
            i[r] = [e[r], t[e[r]]];
        return i
    }, v.invert = function(t) {
        for (var e = {}, n = v.keys(t), i = 0, r = n.length; r > i; i++)
            e[t[n[i]]] = n[i];
        return e
    }, v.functions = v.methods = function(t) {
        var e, n = [];
        for (e in t)
            v.isFunction(t[e]) && n.push(e);
        return n.sort()
    }, v.extend = function(t) {
        return w(o.call(arguments, 1), function(e) {
            if (e)
                for (var n in e)
                    t[n] = e[n]
        }), t
    }, v.pick = function(t) {
        var e = {}, n = c.apply(i, o.call(arguments, 1));
        return w(n, function(n) {
            n in t && (e[n] = t[n])
        }), e
    }, v.omit = function(t) {
        var e, n = {}, r = c.apply(i, o.call(arguments, 1));
        for (e in t)
            v.contains(r, e) || (n[e] = t[e]);
        return n
    }, v.defaults = function(t) {
        return w(o.call(arguments, 1), function(e) {
            if (e)
                for (var n in e)
                    void 0 === t[n] && (t[n] = e[n])
        }), t
    }, v.clone = function(t) {
        return v.isObject(t) ? v.isArray(t) ? t.slice() : v.extend({}, t) : t
    }, v.tap = function(t, e) {
        return e(t), t
    };
    var P = function(t, e, n, i) {
        if (t === e)
            return 0 !== t || 1 / t == 1 / e;
        if (null == t || null == e)
            return t === e;
        t instanceof v && (t = t._wrapped), e instanceof v && (e = e._wrapped);
        var r = u.call(t);
        if (r != u.call(e))
            return !1;
        switch (r) {
            case "[object String]":
                return t == String(e);
            case "[object Number]":
                return t != +t ? e != +e : 0 == t ? 1 / t == 1 / e : t == +e;
            case "[object Date]":
            case "[object Boolean]":
                return +t == +e;
            case "[object RegExp]":
                return t.source == e.source && t.global == e.global && t.multiline == e.multiline && t.ignoreCase == e.ignoreCase
        }
        if ("object" != typeof t || "object" != typeof e)
            return !1;
        for (var s = n.length; s--; )
            if (n[s] == t)
                return i[s] == e;
        var s = t.constructor, o = e.constructor;
        if (s !== o && (!v.isFunction(s) || !(s instanceof s && v.isFunction(o) && o instanceof o)) && "constructor" in t && "constructor" in e)
            return !1;
        if (n.push(t), i.push(e), s = 0, o = !0, "[object Array]" == r) {
            if (s = t.length, o = s == e.length)
                for (; s-- && (o = P(t[s], e[s], n, i)); )
                    ;
        } else {
            for (var c in t)
                if (v.has(t, c) && (s++, !(o = v.has(e, c) && P(t[c], e[c], n, i))))
                    break;
            if (o) {
                for (c in e)
                    if (v.has(e, c) && !s--)
                        break;
                o = !s
            }
        }
        return n.pop(), i.pop(), o
    };
    v.isEqual = function(t, e) {
        return P(t, e, [], [])
    }, v.isEmpty = function(t) {
        if (null == t)
            return !0;
        if (v.isArray(t) || v.isString(t))
            return 0 === t.length;
        for (var e in t)
            if (v.has(t, e))
                return !1;
        return !0
    }, v.isElement = function(t) {
        return !(!t || 1 !== t.nodeType)
    }, v.isArray = r || function(t) {
        return "[object Array]" == u.call(t)
    }, v.isObject = function(t) {
        return t === Object(t)
    }, w("Arguments Function String Number Date RegExp".split(" "), function(t) {
        v["is" + t] = function(e) {
            return u.call(e) == "[object " + t + "]"
        }
    }), v.isArguments(arguments) || (v.isArguments = function(t) {
        return !(!t || !v.has(t, "callee"))
    }), "function" != typeof / . / && (v.isFunction = function(t) {
        return "function" == typeof t
    }), v.isFinite = function(t) {
        return isFinite(t) && !isNaN(parseFloat(t))
    }, v.isNaN = function(t) {
        return v.isNumber(t) && t != +t
    }, v.isBoolean = function(t) {
        return !0 === t || !1 === t || "[object Boolean]" == u.call(t)
    }, v.isNull = function(t) {
        return null === t
    }, v.isUndefined = function(t) {
        return void 0 === t
    }, v.has = function(t, e) {
        return a.call(t, e)
    }, v.noConflict = function() {
        return t._ = e, this
    }, v.identity = function(t) {
        return t
    }, v.constant = function(t) {
        return function() {
            return t
        }
    }, v.property = function(t) {
        return function(e) {
            return e[t]
        }
    }, v.matches = function(t) {
        return function(e) {
            if (e === t)
                return !0;
            for (var n in t)
                if (t[n] !== e[n])
                    return !1;
            return !0
        }
    }, v.times = function(t, e, n) {
        for (var i = Array(Math.max(0, t)), r = 0; t > r; r++)
            i[r] = e.call(n, r);
        return i
    }, v.random = function(t, e) {
        return null == e && (e = t, t = 0), t + Math.floor(Math.random() * (e - t + 1))
    }, v.now = Date.now || function() {
        return (new Date).getTime()
    };
    var A = {escape: {"&": "&amp;","<": "&lt;",">": "&gt;",'"': "&quot;","'": "&#x27;"}};
    A.unescape = v.invert(A.escape);
    var I = {escape: RegExp("[" + v.keys(A.escape).join("") + "]", "g"),unescape: RegExp("(" + v.keys(A.unescape).join("|") + ")", "g")};
    v.each(["escape", "unescape"], function(t) {
        v[t] = function(e) {
            return null == e ? "" : ("" + e).replace(I[t], function(e) {
                return A[t][e]
            })
        }
    }), v.result = function(t, e) {
        if (null != t) {
            var n = t[e];
            return v.isFunction(n) ? n.call(t) : n
        }
    }, v.mixin = function(t) {
        w(v.functions(t), function(e) {
            var n = v[e] = t[e];
            v.prototype[e] = function() {
                var t = [this._wrapped];
                return s.apply(t, arguments), t = n.apply(v, t), this._chain ? v(t).chain() : t
            }
        })
    };
    var F = 0;
    v.uniqueId = function(t) {
        var e = ++F + "";
        return t ? t + e : e
    }, v.templateSettings = {evaluate: /<%([\s\S]+?)%>/g,interpolate: /<%=([\s\S]+?)%>/g,escape: /<%-([\s\S]+?)%>/g};
    var N = /(.)^/, O = {"'": "'","\\": "\\","\r": "r","\n": "n","  ": "t","\u2028": "u2028","\u2029": "u2029"}, k = /\\|'|\r|\n|\t|\u2028|\u2029/g;
    v.template = function(t, e, n) {
        return;
        var i;
        n = v.defaults({}, n, v.templateSettings);
        var r = RegExp([(n.escape || N).source, (n.interpolate || N).source, (n.evaluate || N).source].join("|") + "|$", "g"), s = 0, o = "__p+='";
        t.replace(r, function(e, n, i, r, c) {
            return o += t.slice(s, c).replace(k, function(t) {
                return "\\" + O[t]
            }), n && (o += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'"), i && (o += "'+\n((__t=(" + i + "))==null?'':__t)+\n'"), r && (o += "';\n" + r + "\n__p+='"), s = c + e.length, e
        }), o += "';\n", n.variable || (o = "with(obj||{}){\n" + o + "}\n"), o = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + o + "return __p;\n";
        try {
            i = new Function(n.variable || "obj", "_", o)
        } catch (c) {
            throw c.source = o, c
        }
        return e ? i(e, v) : (e = function(t) {
            return i.call(this, t, v)
        }, e.source = "function(" + (n.variable || "obj") + "){\n" + o + "}", e)
    }, v.chain = function(t) {
        return v(t).chain()
    }, v.mixin(v), w("pop push reverse shift sort splice unshift".split(" "), function(t) {
        var e = i[t];
        v.prototype[t] = function() {
            var n = this._wrapped;
            return e.apply(n, arguments), ("shift" == t || "splice" == t) && 0 === n.length && delete n[0], this._chain ? v(n).chain() : n
        }
    }), w(["concat", "join", "slice"], function(t) {
        var e = i[t];
        v.prototype[t] = function() {
            var t = e.apply(this._wrapped, arguments);
            return this._chain ? v(t).chain() : t
        }
    }), v.extend(v.prototype, {chain: function() {
            return this._chain = !0, this
        },value: function() {
            return this._wrapped
        }}), "function" == typeof define && define.amd && define("underscore", [], function() {
        return v
    })
}.call(this), !function(t, e) {
    var n, i = e.prototype.trim, r = e.prototype.trimRight, s = e.prototype.trimLeft, o = function(t, e) {
        if (1 > e)
            return "";
        for (var n = ""; e > 0; )
            1 & e && (n += t), e >>= 1, t += t;
        return n
    }, c = [].slice, u = function(t) {
        return null == t ? "\\s" : t.source ? t.source : "[" + f.escapeRegExp(t) + "]"
    }, a = {lt: "<",gt: ">",quot: '"',apos: "'",amp: "&"}, l = {};
    for (n in a)
        l[a[n]] = n;
    var h = function() {
        function t(t) {
            return Object.prototype.toString.call(t).slice(8, -1).toLowerCase()
        }
        var n = function() {
            return n.cache.hasOwnProperty(arguments[0]) || (n.cache[arguments[0]] = n.parse(arguments[0])), n.format.call(null, n.cache[arguments[0]], arguments)
        };
        return n.format = function(n, i) {
            var r, s, c, u, a = 1, l = n.length, f = "", d = [];
            for (r = 0; l > r; r++)
                if (f = t(n[r]), "string" === f)
                    d.push(n[r]);
                else if ("array" === f) {
                    if (c = n[r], c[2])
                        for (f = i[a], s = 0; s < c[2].length; s++) {
                            if (!f.hasOwnProperty(c[2][s]))
                                throw Error(h('[_.sprintf] property "%s" does not exist', c[2][s]));
                            f = f[c[2][s]]
                        }
                    else
                        f = c[1] ? i[c[1]] : i[a++];
                    if (/[^s]/.test(c[8]) && "number" != t(f))
                        throw Error(h("[_.sprintf] expecting number but found %s", t(f)));
                    switch (c[8]) {
                        case "b":
                            f = f.toString(2);
                            break;
                        case "c":
                            f = e.fromCharCode(f);
                            break;
                        case "d":
                            f = parseInt(f, 10);
                            break;
                        case "e":
                            f = c[7] ? f.toExponential(c[7]) : f.toExponential();
                            break;
                        case "f":
                            f = c[7] ? parseFloat(f).toFixed(c[7]) : parseFloat(f);
                            break;
                        case "o":
                            f = f.toString(8);
                            break;
                        case "s":
                            f = (f = e(f)) && c[7] ? f.substring(0, c[7]) : f;
                            break;
                        case "u":
                            f = Math.abs(f);
                            break;
                        case "x":
                            f = f.toString(16);
                            break;
                        case "X":
                            f = f.toString(16).toUpperCase()
                    }
                    f = /[def]/.test(c[8]) && c[3] && f >= 0 ? "+" + f : f, s = c[4] ? "0" == c[4] ? "0" : c[4].charAt(1) : " ", u = c[6] - e(f).length, s = c[6] ? o(s, u) : "", d.push(c[5] ? f + s : s + f)
                }
            return d.join("")
        }, n.cache = {}, n.parse = function(t) {
            for (var e = [], n = [], i = 0; t; ) {
                if (null !== (e = /^[^\x25]+/.exec(t)))
                    n.push(e[0]);
                else if (null !== (e = /^\x25{2}/.exec(t)))
                    n.push("%");
                else {
                    if (null === (e = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))
                        throw Error("[_.sprintf] huh?");
                    if (e[2]) {
                        var i = 1 | i, r = [], s = e[2], o = [];
                        if (null === (o = /^([a-z_][a-z_\d]*)/i.exec(s)))
                            throw Error("[_.sprintf] huh?");
                        for (r.push(o[1]); "" !== (s = s.substring(o[0].length)); )
                            if (null !== (o = /^\.([a-z_][a-z_\d]*)/i.exec(s)))
                                r.push(o[1]);
                            else {
                                if (null === (o = /^\[(\d+)\]/.exec(s)))
                                    throw Error("[_.sprintf] huh?");
                                r.push(o[1])
                            }
                        e[2] = r
                    } else
                        i |= 2;
                    if (3 === i)
                        throw Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");
                    n.push(e)
                }
                t = t.substring(e[0].length)
            }
            return n
        }, n
    }(), f = {VERSION: "2.3.0",isBlank: function(t) {
            return null == t && (t = ""), /^\s*$/.test(t)
        },stripTags: function(t) {
            return null == t ? "" : e(t).replace(/<\/?[^>]+>/g, "")
        },capitalize: function(t) {
            return t = null == t ? "" : e(t), t.charAt(0).toUpperCase() + t.slice(1)
        },chop: function(t, n) {
            return null == t ? [] : (t = e(t), n = ~~n, n > 0 ? t.match(RegExp(".{1," + n + "}", "g")) : [t])
        },clean: function(t) {
            return f.strip(t).replace(/\s+/g, " ")
        },count: function(t, n) {
            return null == t || null == n ? 0 : e(t).split(n).length - 1
        },chars: function(t) {
            return null == t ? [] : e(t).split("")
        },swapCase: function(t) {
            return null == t ? "" : e(t).replace(/\S/g, function(t) {
                return t === t.toUpperCase() ? t.toLowerCase() : t.toUpperCase()
            })
        },escapeHTML: function(t) {
            return null == t ? "" : e(t).replace(/[&<>"']/g, function(t) {
                return "&" + l[t] + ";"
            })
        },unescapeHTML: function(t) {
            return null == t ? "" : e(t).replace(/\&([^;]+);/g, function(t, n) {
                var i;
                return n in a ? a[n] : (i = n.match(/^#x([\da-fA-F]+)$/)) ? e.fromCharCode(parseInt(i[1], 16)) : (i = n.match(/^#(\d+)$/)) ? e.fromCharCode(~~i[1]) : t
            })
        },escapeRegExp: function(t) {
            return null == t ? "" : e(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1")
        },splice: function(t, e, n, i) {
            return t = f.chars(t), t.splice(~~e, ~~n, i), t.join("")
        },insert: function(t, e, n) {
            return f.splice(t, e, 0, n)
        },include: function(t, n) {
            return "" === n ? !0 : null == t ? !1 : -1 !== e(t).indexOf(n)
        },join: function() {
            var t = c.call(arguments), e = t.shift();
            return null == e && (e = ""), t.join(e)
        },lines: function(t) {
            return null == t ? [] : e(t).split("\n")
        },reverse: function(t) {
            return f.chars(t).reverse().join("")
        },startsWith: function(t, n) {
            return "" === n ? !0 : null == t || null == n ? !1 : (t = e(t), n = e(n), t.length >= n.length && t.slice(0, n.length) === n)
        },endsWith: function(t, n) {
            return "" === n ? !0 : null == t || null == n ? !1 : (t = e(t), n = e(n), t.length >= n.length && t.slice(t.length - n.length) === n)
        },succ: function(t) {
            return null == t ? "" : (t = e(t), t.slice(0, -1) + e.fromCharCode(t.charCodeAt(t.length - 1) + 1))
        },titleize: function(t) {
            return null == t ? "" : e(t).replace(/(?:^|\s)\S/g, function(t) {
                return t.toUpperCase()
            })
        },camelize: function(t) {
            return f.trim(t).replace(/[-_\s]+(.)?/g, function(t, e) {
                return e.toUpperCase()
            })
        },underscored: function(t) {
            return f.trim(t).replace(/([a-z\d])([A-Z]+)/g, "$1_$2").replace(/[-\s]+/g, "_").toLowerCase()
        },dasherize: function(t) {
            return f.trim(t).replace(/([A-Z])/g, "-$1").replace(/[-_\s]+/g, "-").toLowerCase()
        },classify: function(t) {
            return f.titleize(e(t).replace(/_/g, " ")).replace(/\s/g, "")
        },humanize: function(t) {
            return f.capitalize(f.underscored(t).replace(/_id$/, "").replace(/_/g, " "))
        },trim: function(t, n) {
            return null == t ? "" : !n && i ? i.call(t) : (n = u(n), e(t).replace(RegExp("^" + n + "+|" + n + "+$", "g"), ""))
        },ltrim: function(t, n) {
            return null == t ? "" : !n && s ? s.call(t) : (n = u(n), e(t).replace(RegExp("^" + n + "+"), ""))
        },rtrim: function(t, n) {
            return null == t ? "" : !n && r ? r.call(t) : (n = u(n), e(t).replace(RegExp(n + "+$"), ""))
        },truncate: function(t, n, i) {
            return null == t ? "" : (t = e(t), n = ~~n, t.length > n ? t.slice(0, n) + (i || "...") : t)
        },prune: function(t, n, i) {
            return null == t ? "" : (t = e(t), n = ~~n, i = null != i ? e(i) : "...", t.length <= n ? t : (n = t.slice(0, n + 1).replace(/.(?=\W*\w*$)/g, function(t) {
                return t.toUpperCase() !== t.toLowerCase() ? "A" : " "
            }), n = n.slice(n.length - 2).match(/\w\w/) ? n.replace(/\s*\S+$/, "") : f.rtrim(n.slice(0, n.length - 1)), (n + i).length > t.length ? t : t.slice(0, n.length) + i))
        },words: function(t, e) {
            return f.isBlank(t) ? [] : f.trim(t, e).split(e || /\s+/)
        },pad: function(t, n, i, r) {
            t = null == t ? "" : e(t), n = ~~n;
            var s = 0;
            switch (i ? 1 < i.length && (i = i.charAt(0)) : i = " ", r) {
                case "right":
                    return s = n - t.length, t + o(i, s);
                case "both":
                    return s = n - t.length, o(i, Math.ceil(s / 2)) + t + o(i, Math.floor(s / 2));
                default:
                    return s = n - t.length, o(i, s) + t
            }
        },lpad: function(t, e, n) {
            return f.pad(t, e, n)
        },rpad: function(t, e, n) {
            return f.pad(t, e, n, "right")
        },lrpad: function(t, e, n) {
            return f.pad(t, e, n, "both")
        },sprintf: h,vsprintf: function(t, e) {
            return e.unshift(t), h.apply(null, e)
        },toNumber: function(t, n) {
            if (null == t || "" == t)
                return 0;
            t = e(t);
            var i;
            return i = 1 * (1 * t || 0).toFixed(~~n) || 0, 0 !== i || t.match(/^0+$/) ? i : Number.NaN
        },numberFormat: function(t, e, n, i) {
            return isNaN(t) || null == t ? "" : (t = t.toFixed(~~e), i = i || ",", t = t.split("."), n = t[1] ? (n || ".") + t[1] : "", t[0].replace(/(\d)(?=(?:\d{3})+$)/g, "$1" + i) + n)
        },strRight: function(t, n) {
            if (null == t)
                return "";
            t = e(t), n = null != n ? e(n) : n;
            var i = n ? t.indexOf(n) : -1;
            return ~i ? t.slice(i + n.length, t.length) : t
        },strRightBack: function(t, n) {
            if (null == t)
                return "";
            t = e(t), n = null != n ? e(n) : n;
            var i = n ? t.lastIndexOf(n) : -1;
            return ~i ? t.slice(i + n.length, t.length) : t
        },strLeft: function(t, n) {
            if (null == t)
                return "";
            t = e(t), n = null != n ? e(n) : n;
            var i = n ? t.indexOf(n) : -1;
            return ~i ? t.slice(0, i) : t
        },strLeftBack: function(t, e) {
            if (null == t)
                return "";
            t += "";
            var n = t.lastIndexOf(null != e ? "" + e : e);
            return ~n ? t.slice(0, n) : t
        },toSentence: function(t, e, n, i) {
            e = e || ", ", n = n || " and ";
            var r = t.slice(), s = r.pop();
            return 2 < t.length && i && (n = f.rtrim(e) + n), r.length ? r.join(e) + n + s : s
        },toSentenceSerial: function() {
            var t = c.call(arguments);
            return t[3] = !0, f.toSentence.apply(f, t)
        },slugify: function(t) {
            if (null == t)
                return "";
            var n = RegExp(u("ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź"), "g");
            return t = e(t).toLowerCase().replace(n, function(t) {
                return t = "ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź".indexOf(t), "aaaaaaaaceeeeeiiiilnoooooouuuunczz".charAt(t) || "-"
            }), f.dasherize(t.replace(/[^\w\s-]/g, ""))
        },surround: function(t, e) {
            return [e, t, e].join("")
        },quote: function(t) {
            return f.surround(t, '"')
        },exports: function() {
            var t, e = {};
            for (t in this)
                this.hasOwnProperty(t) && !t.match(/^(?:include|contains|reverse)$/) && (e[t] = this[t]);
            return e
        },repeat: function(t, n, i) {
            if (null == t)
                return "";
            if (n = ~~n, null == i)
                return o(e(t), n);
            for (var r = []; n > 0; r[--n] = t)
                ;
            return r.join(i)
        },levenshtein: function(t, n) {
            if (null == t && null == n)
                return 0;
            if (null == t)
                return e(n).length;
            if (null == n)
                return e(t).length;
            t = e(t), n = e(n);
            for (var i, r, s = [], o = 0; o <= n.length; o++)
                for (var c = 0; c <= t.length; c++)
                    r = o && c ? t.charAt(c - 1) === n.charAt(o - 1) ? i : Math.min(s[c], s[c - 1], i) + 1 : o + c, i = s[c], s[c] = r;
            return s.pop()
        }};
    f.strip = f.trim, f.lstrip = f.ltrim, f.rstrip = f.rtrim, f.center = f.lrpad, f.rjust = f.lpad, f.ljust = f.rpad, f.contains = f.include, f.q = f.quote, "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (module.exports = f), exports._s = f) : "function" == typeof define && define.amd ? define("underscore.string", [], function() {
        return f
    }) : (t._ = t._ || {}, t._.string = t._.str = f)
}(this, String), _.mixin(_.str.exports()), bs = bs || {}, bs.s_sharelayer_ccbi = "js_bscommon/res/shareLayer.ccbi", bs.init = function() {
    cc.Sequence.createWithArray = function(t) {
        if (0 === t.length)
            return cc.Sequence.create();
        if (1 === t.length)
            return cc.Sequence.create(t[0]);
        if (2 === t.length)
            return cc.Sequence.create(t[0], t[1]);
        var e = t.pop();
        return cc.Sequence.create(cc.Sequence.createWithArray(t), e)
    }, cc.PhysicsSprite && (cc.PhysicsSprite.extend = cc.Class.extend), cc.ClippingNode && (cc.ClippingNode.extend = cc.Class.extend), cc.Scale9Sprite && (cc.Scale9Sprite.extend = cc.Class.extend), cc.ParallaxNode && (cc.ParallaxNode.extend = cc.Class.extend)
}, bs.System = bs.System || {}, bs.System.currentTimeMillis = function() {
    return (new Date).getTime()
}, bs.onPlatformBuyGoodSuccess = function() {
}, bs.onPlatformBuyGoodFail = function() {
}, bs.onPlatformRestoreFinish = function() {
}, bs.onPlatformRestoreFail = function() {
}, bs.Pay = bs.Pay || {}, bs.Pay.kPayMethodAppstore = 1, bs.Pay.kPayMethodChinaMobile = 2, bs.Pay.kPayMethodChinaUnicom = 3, bs.Pay.kPayMethodChinaTelecom = 4, bs.Pay.kPayMethodAlipay = 5, bs.Pay.kPayMethodWechat = 6, bs.Pay.kPayMethodQQ = 7, "undefined" == typeof cc.GRAY && (cc.GRAY = {r: 166,g: 166,b: 166}), String.prototype.format = function(t) {
    return this.replace(String.prototype.format.regex, function(e) {
        return e = parseInt(e.substring(1, e.length - 1)), e >= 0 ? t[e] : -1 === e ? "{" : -2 === e ? "}" : ""
    })
}, String.prototype.format.regex = /{-?[0-9]+}/g, bs.stringFromFormat = function(t, e) {
    return t.format(e)
}, bs.fabs = function(t) {
    return 0 > t ? -t : t
}, bs.stringFromSecondsClockStyle = function(t) {
    var e = Math.floor(t / 3600), n = Math.floor((t - 3600 * e) / 60);
    return "{0}:{1}:{2}".format([e, n, t - 3600 * e - 60 * n])
}, bs.middleOfNode = function(t) {
    return cc.p(t.getContentSize().width / 2, t.getContentSize().height / 2)
}, bs.middleOfWindow = function() {
    var t = cc.director.getWinSize();
    return cc.p(t.width / 2, t.height / 2)
}, bs.c4BFromccc3B = function(t) {
    return cc.color(t.r, t.g, t.b, 255)
}, bs.jsonFromFile = function(a) {
    return eval("(" + cc.FileUtils.getInstance().getStringFromFile(a) + ")")
}, bs.parseJSON = function(t) {
    try {
        return JSON.parse(t)
    } catch (e) {
        return cc.log("[JSON]:" + e.message), cc.log("[JSON]:" + e.description), null
    }
}, bs.toJSONString = function(t) {
    try {
        return JSON.stringify(t)
    } catch (e) {
        return cc.log(e.message), cc.log(e.description), null
    }
}, bs.SAFE_REMOVE = function(t) {
    t && t.removeFromParent()
}, bs.RAND = function(t, e) {
    return t + Math.floor(Math.random() * (e - t))
}, bs.surround = function(t, e, n, i) {
    return _.filter([[t - 1, e - 1], [t, e - 1], [t + 1, e - 1], [t - 1, e], [t, e], [t + 1, e], [t - 1, e + 1], [t, e + 1], [t + 1, e + 1]], function(t) {
        return 0 <= t[0] && 0 <= t[1] && t[0] < n && t[1] < i
    })
}, bs.isInBrowser = function() {
    return !cc.sys.isNative
}, bs.ALLOCATE_PRIORITY = function() {
    return bs.TouchPriorityManager.getInstance().allocatePriority()
}, bs._s4 = function() {
    return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
}, bs.guid = function() {
    return bs._s4() + bs._s4() + "-" + bs._s4() + "-" + bs._s4() + "-" + bs._s4() + "-" + bs._s4() + bs._s4() + bs._s4()
}, bs.setFlipX = function(t, e) {
    t.setFlipX ? t.setFlipX(e) : t.setFlippedX(e)
}, bs.setFlipY = function(t, e) {
    t.setFlipY ? t.setFlipY(e) : t.setFlippedY(e)
}, bs.getTop = function(t) {
    return cc.rectGetMaxY(t.getBoundingBox())
}, bs.getTopOnScreen = function(t) {
    return cc.rectGetMaxY(t.getBoundingBoxToWorld())
}, bs.getBottom = function(t) {
    return cc.rectGetMinY(t.getBoundingBox())
}, bs.getBottomOnScreen = function(t) {
    return cc.rectGetMinY(t.getBoundingBoxToWorld())
}, bs.getLeft = function(t) {
    return cc.rectGetMinX(t.getBoundingBox())
}, bs.getRight = function(t) {
    return cc.rectGetMaxX(t.getBoundingBox())
}, bs.getVisualWidth = function(t) {
    return t.getContentSize().width * t.getScaleX()
}, bs.getVisualHeight = function(t) {
    return t.getContentSize().height * t.getScaleY()
}, bs.getVisualSize = function(t) {
    var e = t.getContentSize();
    return cc.size(e.width * t.getScaleX(), e.height * t.getScaleY())
}, bs.centerNodeToParent = function(t, e) {
    bs.positionNodeToParentPercent(t, e, .5, .5)
}, bs.positionNodeToParentPercent = function(t, e, n, i) {
    e = (e || t.getParent()).getContentSize();
    var r = bs.getVisualSize(t), s = t.isIgnoreAnchorPointForPosition() ? cc.p(0, 0) : t.getAnchorPoint();
    t.setPosition(cc.p(e.width * n + (s.x - .5) * r.width, e.height * i + (s.y - .5) * r.height))
}, bs.centerNodeXToParent = function(t, e) {
    e = e || t.getParent(), t.setPositionX(e.getContentSize().width / 2 + (t.getAnchorPoint().x - .5) * t.getContentSize().width)
}, bs.centerNodeYToParent = function(t, e) {
    e = e || t.getParent(), t.setPositionY(e.getContentSize().height / 2 + (t.getAnchorPoint().y - .5) * t.getContentSize().height)
}, bs.scaleToWidth = function(t, e) {
    t.setScale(e / t.getContentSize().width)
}, bs.scaleToHeight = function(t, e) {
    t.setScale(e / t.getContentSize().height)
}, bs.scaleToSize = function(t, e, n) {
    var i = n ? e : e.width;
    n = n ? n : e.height, bs.scaleXToWidth(t, i), bs.scaleYToHeight(t, n)
}, bs.scaleXToWidth = function(t, e) {
    t.setScaleX(e / t.getContentSize().width)
}, bs.scaleYToHeight = function(t, e) {
    t.setScaleY(e / t.getContentSize().height)
}, bs.TexParams = function(t, e, n, i) {
    var r = {};
    return r.minFilter = t || 0, r.magFilter = e || 0, r.wrapS = n || 0, r.wrapT = i || 0, r
}, bs.autoSprite = function(t) {
    return cc.spriteFrameCache.getSpriteFrame(t) ? new cc.Sprite("#" + t) : cc.Sprite.create(t)
}, bs.isInWechat = function() {
    return _.isUndefined(navigator) || _.isUndefined(navigator.userAgent) ? !1 : -1 != navigator.userAgent.toLowerCase().indexOf("micromessenger")
}, bs.headimgForQQ = function(t, e) {
    return "/proxy?url=" + encodeURIComponent(t.replace(/\/[0-9]+$/, "/" + e))
}, bs.setAllMenuEnabledWithNode = function(t, e) {
    for (var n = 0; n < t.getChildrenCount(); ++n)
        this.setAllMenuEnabledWithNode(t.getChildren()[n], e);
    t instanceof cc.Menu && t.setEnabled(e)
}, bs.versionCompare = function(t, e) {
    if ("stringstring" != typeof t + typeof e)
        return !1;
    for (var n = t.split("."), i = e.split("."), r = 0, s = Math.max(n.length, i.length); s > r; r++) {
        if (n[r] && !i[r] && 0 < parseInt(n[r]) || parseInt(n[r]) > parseInt(i[r]))
            return 1;
        if (i[r] && !n[r] && 0 < parseInt(i[r]) || parseInt(n[r]) < parseInt(i[r]))
            return -1
    }
    return 0
}, bs.createSpriteWithAnimate = function(t, e, n, i, r, s) {
    var o = new cc.Sprite("#" + t + e + ".png");
    return t = bs.createAnimate(t, e + 1, n, i), -1 == r ? o.runAction(cc.RepeatForever.create(t)) : (r > 0 && (t = cc.Repeat.create(t, r)), s && (t = cc.Sequence.create(t, cc.RemoveSelf.create())), o.runAction(t)), o
}, bs.createAnimate = function(t, e, n, i, r) {
    var s = t + "_" + e + "_" + n, o = cc.animationCache.getAnimation(s);
    if (!o) {
        for (o = []; -1 == n || n >= e; ++e) {
            var c = bs.spriteFrameFromName(t + e + ".png");
            if (!c)
                break;
            o.push(c)
        }
        o = new cc.Animation(o, i), cc.animationCache.addAnimation(o, s)
    }
    return t = cc.Animate.create(o), r && (-1 == r ? t.repeatForever() : t.repeat(r)), t
}, bs.spriteFrameFromName = function(t) {
    return _.endsWith(t, ".png") || (t += ".png"), cc.spriteFrameCache.getSpriteFrame(t)
}, bs.setSpriteDisplayFrameName = function(t, e, n) {
    e = bs.spriteFrameFromName(e), t.setSpriteFrame(e), n && t.setContentSize(e.getOriginalSize())
}, bs.logf = function() {
    var t = _.sprintf.apply(_, arguments);
    cc.sys.isNative ? cc.log(t) : cc.IS_SHOW_DEBUG_ON_PAGE ? cc._logToWebPage(t) : console.log(t)
}, bs.isTouchInside = function(t, e, n) {
    t = e.convertTouchToNodeSpace(t);
    var i = e.getContentSize().width * e.getScaleX();
    return e = e.getContentSize().height * e.getScaleY(), n = n || cc.rect(0, 0, i, e), cc.rectContainsPoint(n, t)
}, bs.createClippingNode = function(t) {
    var e = cc.DrawNode.create(), n = cc.color(1, 1, 1, 1);
    return t = [cc.p(t.x, t.y), cc.p(t.x + t.width, t.y), cc.p(t.x + t.width, t.y + t.height), cc.p(t.x, t.y + t.height)], e.drawPoly(t, n, 1, n), cc.ClippingNode.create(e)
}, bs.clone = function(t) {
    var e, n = t instanceof Array ? [] : {};
    for (e in t)
        t.hasOwnProperty(e) && !_.isFunction(t[e]) && (n[e] = _.isObject(t[e]) ? bs.clone(t[e]) : t[e]);
    return n
}, bs.convertPositionToTargetNodeSpace = function(t, e, n) {
    var i = t.getAnchorPoint(), r = t.getContentSize();
    return n = n || cc.p(r.width * i.x, r.height * i.y), t = t.convertToWorldSpace(n), e.convertToNodeSpace(t)
}, bs.jsonFromConfFile = function(t) {
    if (this.isInBrowser()) {
        var e = cc.loader.getRes("conf/" + t + ".json");
        if (e)
            return e;
        t = cc.loader._loadTxtSync("res/conf/" + t + ".json")
    } else
        t = bs.Config.shared().loadConf("conf/" + t + ".bjs");
    return bs.parseJSON(t)
}, bs.isNodeVisible = function(t) {
    for (; t && t.isVisible(); )
        t = t.getParent();
    return !t
}, bs.layerWithChildrenHorizontal = function(t, e, n, i) {
    var r = cc.Layer.create(), s = 0;
    null == n && (n = cc.VERTICAL_TEXT_ALIGNMENT_CENTER), i || (i = 0, _.each(t, function(t) {
        t = bs.getVisualSize(t).height, t > i && (i = t)
    }));
    var o = [1, .5, 0];
    return _.each(t, function(t) {
        if (t) {
            var c = bs.getVisualSize(t), u = t.getAnchorPoint();
            t.isIgnoreAnchorPointForPosition() && (u = cc.p(0, 0));
            var a = cc.p(s, o[n] * (i - c.height));
            t.setPosition(cc.pAdd(a, cc.pCompMult(u, cc.pFromSize(c)))), s += c.width + e, r.addChild(t)
        }
    }), r.setContentSize(s - e, i), r.setAnchorPoint(0, 0), r
}, bs.layerWithChildrenVertical = function(t, e, n, i) {
    var r = cc.Layer.create(), s = 0;
    (_.isUndefined(n) || _.isNull(n)) && (n = cc.TEXT_ALIGNMENT_CENTER), i || (i = 0, _.each(t, function(t) {
        t && (t = t.getContentSize().width, t > i && (i = t))
    }));
    var o = [0, .5, 1];
    return t.reverse(), _.each(t, function(t) {
        if (t) {
            var c = bs.getVisualSize(t), u = t.getAnchorPoint();
            t.isIgnoreAnchorPointForPosition() && (u = cc.p(0, 0));
            var a = cc.p(o[n] * (i - c.width), s);
            t.setPosition(cc.pAdd(a, cc.pCompMult(u, cc.pFromSize(c)))), s += c.height + e, r.addChild(t)
        }
    }), r.setContentSize(i, s - e), r.setAnchorPoint(0, 0), r
}, bs.formatTime = function(t) {
    var e = Math.floor(t / 3600);
    t = Math.floor(t % 3600);
    var n = Math.floor(t / 60);
    t %= 60;
    var i = "", i = e >= 10 ? e : "0" + e, i = n >= 10 ? i + ":" + n : i + ":0" + n;
    return t >= 10 ? i + ":" + t : i + ":0" + t
}, bs.roundingTime = function(t) {
    var e = Math.floor(t / 86400), n = Math.floor(t / 3600), i = Math.floor(t / 60);
    return 0 != e ? e + "天" : 0 != n ? n + "小时" : 0 != i ? i + "分钟" : t + "秒"
}, bs.registerTouchEventOneByOne = function(t, e, n) {
    return e = {event: cc.EventListener.TOUCH_ONE_BY_ONE,swallowTouches: null == e ? !0 : e,onTouchBegan: t.onTouchBegan.bind(t)}, t.onTouchMoved && (e.onTouchMoved = t.onTouchMoved.bind(t)), t.onTouchEnded && (e.onTouchEnded = t.onTouchEnded.bind(t)), t.onTouchCanceled && (e.onTouchCanceled = t.onTouchCanceled.bind(t)), e = cc.EventListener.create(e), cc.eventManager.addListener(e, n || t), e
}, bs.kSocialTypeNone = 0, bs.kSocialTypeQQ = 1, bs.kSocialTypeWechat = 2, bs.kSocialTypeLaiwang = 3, bs.kBSSocialTypeWeibo = 4, bs.Sound = {_isMute: !1,_isMusicMute: !1,_isEffectMute: !1,_musicVolume: 1,_effectVolume: 1,_stack: [],getEffectVolume: function() {
        return this._effectVolume
    },setEffectVolume: function(t) {
        this._effectVolume = t, cc.audioEngine.setEffectsVolume(t)
    },getMusicVolume: function() {
        return this._musicVolume
    },setMusicVolume: function(t) {
        this._musicVolume = t, cc.audioEngine.setMusicVolume(t)
    },getIsMute: function() {
        return this._isMute
    },setIsMute: function(t) {
        this._isMute = t, this.setIsEffectMute(t), this.setIsMusicMute(t)
    },getIsMusicMute: function() {
        return this._isMusicMute
    },setIsMusicMute: function(t) {
        this._isMusicMute = t, cc.audioEngine.setMusicVolume(t ? 0 : this._musicVolume)
    },switchMusicMute: function() {
        this.setIsMusicMute(!this.getIsEffectMute())
    },getIsEffectMute: function() {
        return this._isEffectMute
    },setIsEffectMute: function(t) {
        this._isEffectMute = t, cc.audioEngine.setEffectsVolume(t ? 0 : this._effectVolume)
    },switchEffectMute: function() {
        this.setIsEffectMute(!this.getIsEffectMute())
    },playEffect: function(t, e) {
        return cc.audioEngine.playEffect(t, e)
    },stopEffect: function(t) {
        cc.audioEngine.stopEffect(t)
    },stopAllEffects: function() {
        cc.audioEngine.stopAllEffects()
    },playMusic: function(t) {
        cc.audioEngine.playMusic(t)
    },stopMusic: function() {
        cc.audioEngine.stopMusic()
    },pushMusic: function(t, e) {
        var n = this._stack;
        return 0 >= n.length || e <= _.last(n).priority ? (n.push({file: t,priority: e}), this._playMusic(t), !0) : !1
    },popMusic: function() {
        var t = this._stack;
        0 >= t.length || (cc.audioEngine.stopMusic(), t.pop(), 0 < t.length && this._playMusic(_.last(t).file))
    },dump: function() {
        cc.log("bs.Sound.dump not implemented.")
    },destroy: function() {
    },configure: function() {
    },active: function() {
    },init: function() {
    },_playMusic: function(t) {
        cc.audioEngine.stopMusic(), cc.audioEngine.playMusic(t, !0)
    },shared: function() {
        return this
    }}, bs.kResourceStatusServerError = -3, bs.kResourceStatusCacheDirError = -2, bs.kResourceStatusUnknown = -1, bs.kResourceStatusUpToDate = 0, bs.kResourceStatusChecking = 1, bs.kResourceStatusNeedUpdate = 2, bs.kResourceStatusUpdating = 3, bs.kResourceStatusFinish = 4, bs.kMessageResourceStatusChanged = "message-resource-status-changed", bs.kMessageResourceUpdateProgressChanged = "message-resource-update-progress-changed", bs.onResourceCheckStatusChanged = function(t, e) {
    bs.postMessage(bs.kMessageResourceStatusChanged, {module: t,status: e}), bs.logf("[BSResource] onResourceCheckStatusChanged: %s, %d", t, e)
}, bs.onResourceUpdateStatusChanged = function(t, e) {
    bs.postMessage(bs.kMessageResourceStatusChanged, {module: t,status: e}), bs.logf("[BSResource] onResourceUpdateStatusChanged: %s, %d", t, e)
}, bs.onResourceUpdateProgressChanged = function(t, e, n) {
    bs.postMessage(bs.kMessageResourceUpdateProgressChanged, {module: t,finished: e,total: n}), bs.logf("[BSResource] onResourceUpdateProgressChanged: %s, %d, %d", t, e, n)
}, bs.Http = bs.Http || {}, bs.Http.TIME_OUT = 1e4, bs.Http.proxy = function(t, e) {
    bs.Http.get("/proxy?url=" + encodeURIComponent(t), e)
}, bs.Http.get = function(t, e) {
    var n = new XMLHttpRequest;
    n.open("GET", t, !0), n.onreadystatechange = function() {
        4 == n.readyState && _.isFunction(e) && (200 == n.status ? e(null, n.responseText) : (cc.log("[BSHttp] response status error :" + n.status), 0 >= n.status ? e(n.status, null) : e(n.status, n.responseText)))
    }, n.timeout = bs.Http.TIME_OUT, n.ontimeout = e, n.send()
}, bs.Http.post = function(t, e, n, i) {
    var r = new XMLHttpRequest;
    r.open("POST", t, !0), i && r.setRequestHeader("Content-Type", i), r.onreadystatechange = function() {
        4 == r.readyState && _.isFunction(n) && (200 == r.status ? n(null, r.responseText) : (cc.log("[BSHttp] response status error :" + r.status), 0 >= r.status ? n(r.status, null) : n(r.status, r.responseText)))
    }, r.timeout = bs.Http.TIME_OUT, r.send(e)
}, bs.Http._signingFunc = null, bs.Http.setSigningFunction = function(t) {
    bs.Http._signingFunc = t
}, bs.Http.addSignature = function(t, e) {
    if (_.isFunction(bs.Http._signingFunc)) {
        var n = bs.Http._signingFunc(t, e);
        _.isArray(e) ? e.push(n) : e._sig = n
    }
}, bs.Http.jsonrpc = function(t, e, n, i) {
    bs.Http.addSignature(e, n), bs.Http.post(t, JSON.stringify({jsonrpc: "2.0",method: e,params: n,id: 0}), function(t, n) {
        if (t)
            i(t, null);
        else {
            var r = bs.parseJSON(n);
            !r || r.error ? (cc.log("[BSHTTP] rpc:" + e + ", return error:" + JSON.stringify(r)), i(r, null)) : i(null, bs.parseJSON(n).result)
        }
    }, "application/json")
}, bs.TouchPriorityManager = cc.Class.extend({_currentPriority: 1e6,allocatePriority: function() {
        return this._currentPriority--, this._currentPriority == this.kHighestPriority && (cc.log("[TouchPriorityManager] touch priority overflow"), this._currentPriority = this.kLowestPriority), this._currentPriority
    }}), bs.gTouchPriorityManagerInstance = null, bs.TouchPriorityManager.getInstance = function() {
    return null == bs.gTouchPriorityManagerInstance && (bs.gTouchPriorityManagerInstance = new bs.TouchPriorityManager), bs.gTouchPriorityManagerInstance
}, bs.TouchPriorityManager.kLowestPriority = 1e6, bs.TouchPriorityManager.kHighestPriority = 1024, bs.TouchableSprite = cc.Layer.extend({RGBAProtocol: !0,_target: null,_callback: null,_isSwallowTouch: !1,_isTouchMoved: !1,_conditionalRect: null,_internalImg: null,_cancelTouchOnMove: !1,_cancelTouchOnMoveOut: !0,_enable: !0,_originTouchPoint: null,_foregroundImg: null,_normalSpriteFrameName: null,_selectedSpriteFrameName: null,_disabledSpriteFrameName: null,_fadeOutCallback: null,ctor: function() {
        this._super()
    },_isTouchInside: function(t) {
        t = this.convertToNodeSpace(t.getLocation());
        var e = this.rect();
        return e.x = 0, e.y = 0, cc.rectEqualToRect(this._conditionalRect, cc.rect(0, 0, 0, 0)) ? cc.rectContainsPoint(e, t) : cc.rectContainsPoint(this._conditionalRect, t)
    },init: function(t, e) {
        this._super(), this._target = e, this._callback = t, this._conditionalRect = cc.rect(0, 0, 0, 0), this._eventListener = bs.registerTouchEventOneByOne(this), this.ignoreAnchorPointForPosition(!1)
    },initWithSize: function(t, e, n) {
        this.init(e, n), this.setContentSize(t)
    },initWithSpriteName: function(t, e, n) {
        this.init(e, n), t = this._internalImg = new cc.Sprite(t), t.setAnchorPoint(0, 0), this.addChild(t), this.setContentSize(t.getContentSize())
    },initWithSpriteFrameName: function(t, e, n) {
        this.init(e, n), t = this._internalImg = new cc.Sprite("#" + t), t.setAnchorPoint(0, 0), this.addChild(t), this.setContentSize(t.getContentSize())
    },initWithTwoStateSpriteFrameName: function(t, e, n, i) {
        this.init(n, i), n = this._internalImg = new cc.Sprite("#" + t), this.setNormalSpriteFrameName(t), this.setSelectedSpriteFrameName(e), n.setAnchorPoint(0, 0), this.addChild(n), this.setContentSize(n.getContentSize())
    },initWithThreeStateSpriteFrameName: function(t, e, n, i, r) {
        this.init(i, r), i = this._internalImg = new cc.Sprite("#" + t), this.setNormalSpriteFrameName(t), this.setSelectedSpriteFrameName(e), this.setDisabledSpriteFrameName(n), i.setAnchorPoint(0, 0), this.addChild(i), this.setContentSize(i.getContentSize())
    },initWithScale9SpriteFrameName: function(t, e, n, i, r) {
        this.init(i, r), t = this._internalImg = cc.Scale9Sprite.createWithSpriteFrameName(t, e), t.setAnchorPoint(0, 0), this.addChild(t), this.setContentSize(n)
    },initWithSprite: function(t, e, n) {
        this.init(e, n), this._internalImg = t, t.setAnchorPoint(0, 0), this.addChild(t), this.setContentSize(t.getContentSize())
    },setIsSwallowTouch: function(t) {
        this._eventListener.setSwallowTouches(t)
    },rect: function() {
        var t = this.getPosition(), e = this.getContentSize(), n = this.getAnchorPoint();
        return cc.rect(t.x - e.width * n.x, t.y - e.height * n.y, e.width, e.height)
    },setForegroundImg: function(t, e, n) {
        this._foregroundImg = {node: t,anchor: _.clone(e),pos: _.clone(n)};
        var i = this.getContentSize();
        e && (t.setAnchorPoint(e), t.setPosition(n.x + i.width * e.x, n.y + i.height * e.y)), this.addChild(t, 1)
    },setContentSize: function(t) {
        cc.sizeEqualToSize(t, this.getContentSize()) || (this._super(t), this._internalImg && this._internalImg.setContentSize(t))
    },setFlipX: function(t) {
        bs.setFlipX(this._internalImg, t)
    },setFlipY: function(t) {
        bs.setFlipY(this._internalImg, t)
    },setSpriteFrame: function(t) {
        if (this._internalImg instanceof cc.Scale9Sprite) {
            var e = this._internalImg.getCapInsets(), n = _.clone(this._internalImg.getContentSize()), i = _.clone(this._internalImg.getAnchorPoint());
            this._internalImg.initWithSpriteFrame(t, e), this._internalImg.setAnchorPoint(i), this._internalImg.setContentSize(n)
        } else
            this._updateDisplayFrame(t)
    },setNormalSpriteFrameName: function(t) {
        var e = !!this._normalSpriteFrameName;
        this._normalSpriteFrameName = t, e && (t = cc.spriteFrameCache.getSpriteFrame(t), this._updateDisplayFrame(t))
    },setSelectedSpriteFrameName: function(t) {
        this._selectedSpriteFrameName = t
    },setDisabledSpriteFrameName: function(t) {
        this._disabledSpriteFrameName = t
    },setCancelTouchOnMove: function(t) {
        this._cancelTouchOnMove = t
    },setCancelTouchOnMoveOut: function(t) {
        this._cancelTouchOnMoveOut = t
    },onTouchBegan: function(t) {
        if (!bs.isNodeVisible(this))
            return !1;
        if (this._originTouchPoint = _.clone(t.getLocation()), this._isTouchInside(t) && this._enable) {
            if (this._selectedSpriteFrameName) {
                var e = cc.spriteFrameCache.getSpriteFrame(this._selectedSpriteFrameName);
                this._updateDisplayFrame(e)
            }
            return !0
        }
        return !1
    },onTouchMoved: function(t) {
        15 < cc.pDistance(t.getLocation(), this._originTouchPoint) && (this._isTouchMoved = !0)
    },onTouchEnded: function(t) {
        if (this._normalSpriteFrameName && this._enable) {
            var e = cc.spriteFrameCache.getSpriteFrame(this._normalSpriteFrameName);
            this._updateDisplayFrame(e)
        }
        if (this._enable && (!this._cancelTouchOnMoveOut || this._isTouchInside(t)) && (e = this._isTouchMoved, this._isTouchMoved = !1, !e || !this._cancelTouchOnMove)) {
            var e = this._target, n = this._callback;
            n && (e && "string" == typeof n ? e[n](this) : e && "function" == typeof n ? n.call(e, this, t) : n(this))
        }
    },isCascadeColorEnabled: function() {
        return !1
    },isCascadeOpacityEnabled: function() {
        return !1
    },getColor: function() {
        return this._internalImg.getColor()
    },setColor: function(t) {
        for (var e = this.getChildren(), n = 0; n < e.length; n++) {
            var i = e[n];
            i && i.setColor && i.setColor(t)
        }
    },getOpacity: function() {
        return this._internalImg.getOpacity()
    },setOpacity: function(t) {
        for (var e = this.getChildren(), n = 0; n < e.length; n++) {
            var i = e[n];
            i && i.setOpacity && i.setOpacity(t)
        }
    },setEnabled: function(t) {
        t != this._enable && (this._enable = t, this._disabledSpriteFrameName && (t = cc.spriteFrameCache.getSpriteFrame(t ? this._normalSpriteFrameName : this._disabledSpriteFrameName), this._updateDisplayFrame(t)))
    },setTouchEnabled: function() {
        cc.log("do not use bs.TouchableSprite.setTouchEnabled, use setEnabled instead")
    },_updateDisplayFrame: function(t) {
        if (this._foregroundImg) {
            var e = this._internalImg.displayFrame().getOriginalSize(), n = t.getOriginalSize();
            if (this._internalImg.setSpriteFrame(t), !cc.sizeEqualToSize(e, n)) {
                t = this._foregroundImg;
                var e = t.pos, i = t.anchor;
                t.node.setPosition(e.x + n.width * i.x, e.y + n.height * i.y)
            }
        } else
            this._internalImg.setSpriteFrame(t)
    },fadeOut: function(t, e) {
        this._fadeOutStep = 255 / t, this._fadeOutCallback = e, this.scheduleUpdate()
    },update: function(t) {
        t = this.getOpacity() - this._fadeOutStep * t, 0 >= t && (t = 0, this.unscheduleUpdate(), this._fadeOutCallback && (this._fadeOutCallback(), this._fadeOutCallback = null)), this.setOpacity(t)
    }}), bs.TouchableSprite.createWithSize = function(t, e, n) {
    var i = new this;
    return i.initWithSize(t, e, n), i
}, bs.TouchableSprite.createWithSprite = function(t, e, n) {
    return t = new this, t.initWithSprite(t, e, n), t
}, bs.TouchableSprite.createWithSpriteName = function(t, e, n) {
    var i = new this;
    return i.initWithSpriteName(t, e, n), i
}, bs.TouchableSprite.createWithSpriteFrameName = function(t, e, n) {
    var i = new this;
    return i.initWithSpriteFrameName(t, e, n), i
}, bs.TouchableSprite.createWithTwoStateSpriteFrameName = function(t, e, n, i) {
    var r = new this;
    return r.initWithTwoStateSpriteFrameName(t, e, n, i), r
}, bs.TouchableSprite.createWithThreeStateSpriteFrameName = function(t, e, n, i, r) {
    var s = new this;
    return s.initWithThreeStateSpriteFrameName(t, e, n, i, r), s
}, bs.TouchableSprite.createWithScale9SpriteFrameName = function(t, e, n, i, r) {
    var s = new this;
    return s.initWithScale9SpriteFrameName(t, e, n, i, r), s
}, bs.TouchableSpriteWithSwitch = bs.TouchableSprite.extend({_frameOn: null,_frameOff: null,_sp_on: null,_sp_off: null,_on: null,_delta: null,initWithFrameName: function(t, e, n, i, r, s) {
        return bs.TouchableSprite.prototype.initWithSize.call(this, t, s, r, e), this._frameOn = cc.spriteFrameCache.getSpriteFrame(n), this._frameOff = cc.spriteFrameCache.getSpriteFrame(i), this._sp_on = cc.Sprite.createWithSpriteFrame(this._frameOn), this._sp_on.setAnchorPoint(cc.p(0, 0)), this._sp_off = cc.Sprite.createWithSpriteFrame(this._frameOff), this._sp_off.setAnchorPoint(cc.p(0, 0)), this._on = !1, this.addChild(this._sp_on), this.addChild(this._sp_off), this._sp_off.setVisible(!0), this._sp_on.setVisible(!1), !0
    },toggle: function() {
        this.switchTo(!this._on)
    },switchOn: function() {
        this.switchTo(!0)
    },switchOff: function() {
        this.switchTo(!1)
    },switchTo: function(t) {
        this._on = t, this._sp_off.setVisible(!1), this._sp_on.setVisible(!1), t ? this._sp_on.setVisible(!0) : this._sp_off.setVisible(!0)
    },isOn: function() {
        return this._on
    },setDeltaForStateChanging: function(t) {
        this._delta = t
    }}), bs.TouchableSpriteWithSwitch.switchSpriteWithFrameName = function(t, e, n, i, r, s) {
    var o = new bs.TouchableSpriteWithSwitch;
    return o.initWithFrameName(t, e, n, i, r, s), o
}, bs.kMessageAppEnterForeground = "bs-message-app-enter-foreground", bs.kMessageAppEnterBackground = "bs-message-app-enter-background", bs.kMessageSocialUserInfoUpdated = "bs-message-social-user-info-updated", bs.kMessageRegisterRemoteNotification = "bs-message-register-remote-notification", bs.kMessageSocialWechatCode = "bs-message-social-wechat-code", bs.kMessagePayRestoreFinished = "bs-message-pay-restore-finish", bs.kMessagePaySuccess = "bs-message-pay-success", bs.kMessagePayFail = "bs-message-pay-fail", bs.MessageManager = cc.Class.extend({_handlers: {},_delayedMessages: [],registerHandler: function(t, e, n) {
        null == this._handlers[t] && (this._handlers[t] = []), this._handlers[t].push({target: e,callback: n})
    },unregisterHandler: function(t, e, n) {
        var i = this._handlers[t];
        null != i && (this._handlers[t] = _.filter(i, function(t) {
            return t.target != e || t.callback != n
        }))
    },unregisterAllHandlerForTarget: function(t) {
        var e = this._handlers;
        _.each(e, function(n, i) {
            _.isEmpty(n) || (e[i] = _.filter(n, function(e) {
                return e.target != t
            }))
        })
    },postDelayedMessage: function(t, e) {
        this._delayedMessages.push([t, e])
    },flushMessage: function() {
        _.each(this._delayedMessages, function(t) {
            this.postMessage(t[0], t[1])
        }.bind(this))
    },postMessage: function(t, e) {
        var n = this._handlers[t];
        if (null != n)
            for (var i = 0; i < _.size(n); i++) {
                var r = n[i];
                r.callback.call(r.target, e, t)
            }
    }}), bs.g_messageManager = null, bs.MessageManager.getInstance = function() {
    return null == bs.g_messageManager && (bs.g_messageManager = new bs.MessageManager), bs.g_messageManager
}, bs.registerMessageHandler = function(t, e, n) {
    bs.MessageManager.getInstance().registerHandler(t, e, n)
}, bs.unregisterMessageHandler = function(t, e, n) {
    bs.MessageManager.getInstance().unregisterHandler(t, e, n)
}, bs.unregisterAllMessageHandlerForTarget = function(t) {
    bs.MessageManager.getInstance().unregisterAllHandlerForTarget(t)
}, bs.postMessage = function(t, e) {
    bs.MessageManager.getInstance().postMessage(t, e)
}, bs.postDelayedMessage = function(t, e) {
    bs.MessageManager.getInstance().postDelayedMessage(t, e)
}, bs.BIND_MESSAGE = bs.registerMessageHandler, bs.UNBIND_MESSAGE = bs.unregisterMessageHandler, bs.POST_MESSAGE = bs.postMessage, bs.POST_DELAYED_MESSAGE = bs.postDelayedMessage, bs.Share = bs.Share || {}, bs.Share.kShareTargetWeixinSession = 0, bs.Share.kShareTargetWeixinTimeline = 1, bs.Share.kShareTargetQQ = 2, bs.Share.kShareTargetQZone = 3, bs.Share.kTargetWeixinSession = 0, bs.Share.kTargetWeixinTimeline = 1, bs.Share.kTargetQQ = 2, bs.Share.kTargetQZone = 3, bs.Layer = cc.Layer.extend({_plistUsed: null,init: function() {
        this._super(), this._plistUsed = []
    },use: function(t) {
        this._plistUsed.push(t), bs.Resource.shared().useResource(t)
    },onExit: function() {
        this._super(), bs.unregisterAllMessageHandlerForTarget(this), _.each(this._plistUsed, function(t) {
            bs.Resource.shared().unuseResource(t)
        })
    },setDebugDraw: function() {
        var t = this.getContentSize(), t = [cc.p(0, 0), cc.p(t.width, 0), cc.p(t.width, t.height), cc.p(0, t.height)], e = cc.DrawNode.create();
        this.addChild(e, -1), e.drawPoly(t, new cc.Color4F(0, 0, 1, .5), 1, new cc.Color4F(1, 0, 1, 1))
    }}), bs.ToggleButton = bs.TouchableSprite.extend({_img1: null,_img2: null,_status: 0,initWithSprite: function(t, e, n, i, r) {
        this._img1 = bs.autoSprite(t), this._img2 = bs.autoSprite(e), bs.TouchableSprite.prototype.initWithSize.call(this, this._img1.getContentSize(), n, i, r), this._img1.setAnchorPoint(cc.p(0, 0)), this._img2.setAnchorPoint(cc.p(0, 0)), this.addChild(this._img1), this.addChild(this._img2), this._img1.setVisible(0 === this._status), this._img2.setVisible(1 === this._status)
    },onTouchBegan: function(t, e) {
        return this._super(t, e)
    },onTouchEnded: function(t, e) {
        this._isTouchInside(t) && (this._status = (this._status + 1) % 2, this._img1.setVisible(0 === this._status), this._img2.setVisible(1 === this._status)), this._super(t, e)
    }}), bs.ToggleButton.create = function(t, e, n, i, r) {
    var s = new bs.ToggleButton;
    return s.initWithSprite(t, e, n, i, r), s
}, function() {
    //var t = "1", e = "9", n = "2", i = "5", r = "a", s = "w", o = "n", c = "c", u = "m", a = "o", l = "7", h = "h", f = "e", d = "/", p = t + e + n, g = t + l + n, m = i + t + h + i, _ = s + r + o + h + i, b = c + a + u, y = "l" + a + c + r + "ti" + a + o, S = h + a + "st" + o + r + u + f, v = h + "r" + f + "f", w = "^(?:" + p + "|" + g + ")\\.|(?:" + m + "|" + _ + ")\\." + b + "$", T = this;
    //new RegExp(w, "i").test(T[y][S]) || (T[y][v] = d + d + m + "." + b + d + s + "x")
}();
var Util = {scene: function(t) {
        var e = cc.Scene.create();
        return t = t instanceof cc.Layer ? t : new t, e.addChild(t), e
    },fullscreenNode: function(t, e) {
        e && t.setContentSize(e);
        var n = cc.winSize;
        t.width / t.height > n.width / n.height ? (bs.scaleToHeight(t, n.height), t.x = (n.width - t.width * t.scale) / 2) : (bs.scaleToWidth(t, n.width), t.y = (n.height - t.height * t.scale) / 2)
    },randomReal: function(t, e) {
        return _.isArray(t) && (e = t[1], t = t[0]), Math.random() * (e - t) + t
    },randomInt: function(t, e) {
        return Math.floor(Math.random() * (e - t + 1)) + t
    },randomRate: function(t) {
        return Math.random() < t
    },randomItemByRate: function(t, e, n) {
        var i = 0, r = 0;
        _.each(t, function(t) {
            void 0 == t[e] || _.isFunction(n) && !n(t) || (i += t[e])
        });
        var s, i = 1e4 * i, o = this.randomReal(0, i);
        for (s in t) {
            var c = t[s];
            if (!_.isFunction(n) || n(c)) {
                var u = r + 1e4 * c[e];
                if (o > r && u >= o)
                    return c;
                r = u
            }
        }
        return null
    },trackEvent: function() {
    }}, wx = wx || {}, g_resources = ["texture.png", "texture.plist", "bg.jpg", "ant.mp3", "other.mp3"];
cc.game.onStart = function() {
	myStart();
    cc.view.adjustViewPort(!0);
    var t = cc.winSize;
    cc.view.setDesignResolutionSize(320, 480, cc.ResolutionPolicy.FIXED_WIDTH), cc.view.resizeWithBrowserSize(!0), cc.LoaderScene.preload(g_resources, function() {
        wx.init(), cc.director.runScene(Util.scene(wx.ant.UILayer))
    }, this)
}, cc.game.run(), wx.ant = {type: {Ant: "my",Bee: "mf",Cockroach: "cl"},ggtext: {my: "你被第%(next)d只蚂蚁绊了个大跟头，是可忍孰不可忍？！",mf: "你错踩小蜜蜂，被蜜蜂家族蛰了满头包……",zl: "你误伤了小强，被小强爸比们围殴了……"},conf: [{id: "my1",rate: 2,speed: 1}, {id: "my2",rate: 2,speed: 1.2}, {id: "mf",rate: 1,speed: .8}, {id: "zl",rate: 1,speed: 1.5}],stages: [{time: 6,interval: [1.3, 1.7],speed: [1, 1.2]}, {time: 6,interval: [1, 1.4],speed: [1.2, 1.5]}, {time: 7,interval: [.7, 1.3],speed: [1.4, 1.8]}, {time: 6,interval: [.5, 1],speed: [1.6, 2.1]}, {time: 6,interval: [.3, .8],speed: [1.8, 2.4]}],rank: [0, 5.21, 10.38, 20.12, 24.56, 30.83, 36.95, 44.87, 46.96, 47.72, 50.98, 52.3, 55.61, 56.79, 57.97, 59.15, 60.33, 61.51, 62.69, 63.86, 65.03, 66.23, 67.4, 68.57, 69.74, 70.91, 72.08, 73.25, 74.42, 75.59, 76.76, 76.93, 77.02, 77.46, 77.91, 78.34, 78.78, 79.22, 79.31, 79.48, 79.65, 79.82, 79.96, 80.11, 80.26, 80.41, 80.56, 80.71, 80.86, 81.01, 81.16, 82.49, 83.83, 85.17, 86.49, 87.81, 89.13, 90.45, 91.77, 91.99, 92.21, 92.43, 92.65, 92.87, 93.09, 93.31, 93.53, 93.75, 93.97, 94.19, 94.38, 94.57, 94.76, 94.95, 95.14, 95.33, 95.52, 95.71, 95.93, 96.09, 96.28, 96.47, 96.66, 96.85, 97.04, 97.23, 97.42, 97.61, 97.81, 97.99, 98.18, 98.37, 98.56, 98.75, 98.94, 99.13, 99.32, 99.51, 99.63, 99.75, 99.87, 99.99],holeCount: 2,gameArea: cc.size(250, 250),baseSpeed: 60,lastTime: 0,lastScore: 0,lastRank: "0",green: cc.color(93, 172, 53),red: cc.color(239, 90, 55),isGameOver: !1,getTitle: function() {
        var t = wx.ant.score || 0;
        return t >= 150 ? "黄金杀蚂特" : t >= 100 && 150 > t ? "白银杀蚂特" : t >= 50 && 150 > t ? "高级杀蚂特" : t >= 20 && 50 > t ? "中级杀蚂特" : "初级杀蚂特"
    }}, wx.ant.GameLayer = bs.Layer.extend({gameArea: null,holes: null,stageId: 0,_newBugFunc: null,ctor: function() {
        this._super(), this.init();
        var t = wx.ant.gameArea;
        this.gameArea = new cc.Node, this.gameArea.attr({anchorX: .5,anchorY: .5,x: cc.winSize.width / 2,y: cc.winSize.height / 2 - 40,width: t.width,height: t.height}), this.addChild(this.gameArea);
        var e = cc.LabelTTF.create("在虚线区域内把蚂蚁消灭干净！", "黑体", 18);
        e.setColor(cc.color("#a98c3f")), e.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER), e.x = cc.winSize.width / 2, e.y = bs.getBottom(this.gameArea) - 20, this.addChild(e);
        var n, i = cc.p(0, 0);
        this.holes = _.map(_.range(0, wx.ant.holeCount), function() {
            var e = new cc.Sprite("#cmy_hole.png");
            do
                e.x = Util.randomReal(.3, .7) * t.width, e.y = Util.randomReal(.3, .7) * t.height, n = cc.pDistance(i, e.getPosition());
            while (50 > n);
            return this.gameArea.addChild(e), i = e.getPosition(), e
        }.bind(this)), this.start();
        for (var e = [0, 0, 0, 1], r = [0, 0, 1, 0], s = [0, -90, 0, -90], o = 0; 4 > o; ++o) {
            var c = new cc.Sprite("#cmy_line.png");
            this.gameArea.addChild(c), c.setRotation(s[o]), bs.scaleToWidth(c, wx.ant.gameArea.width), c.setAnchorPoint(0, 0), c.x = e[o] * this.gameArea.width, c.y = r[o] * this.gameArea.height
        }
    },start: function() {
        wx.ant.isGameOver = !1;
        var t = wx.ant.stages[this.stageId];
        this.scheduleOnce(this.newBug.bind(this), .5), this.scheduleOnce(this.nextStage.bind(this), t.time + .5)
    },stop: function() {
        this.unscheduleAllCallbacks()
    },newBug: function() {
        var t = Util.randomItemByRate(wx.ant.conf, "rate").id, e = wx.ant.stages[this.stageId], t = new wx.ant.Bug(t, _.sample(this.holes).getPosition(), Util.randomReal(e.speed));
        this.gameArea.addChild(t), e = Util.randomReal(e.interval), this.scheduleOnce(this.newBug.bind(this), e)
    },nextStage: function() {
        var t = wx.ant.stages[this.stageId + 1];
        t && (this.stageId++, this.scheduleOnce(this.nextStage.bind(this), t.time))
    }}), wx.ant.Bug = cc.Sprite.extend({type: null,speed: null,dead: !1,ctor: function(t, e, n) {
        this._super(), this.type = t, this.speed = n, t = "cmy_" + t, this.initWithSpriteFrameName(t + "_1.png"), this.runAction(bs.createAnimate(t + "_", 2, -1, 1 / 12, -1)), this.setRotation(Util.randomInt(0, 359)), this.setPosition(e), bs.registerTouchEventOneByOne(this, !0)
    },onEnter: function() {
        this._super();
        var t = cc.degreesToRadians(this.getRotation()), e = wx.ant.gameArea.width * Math.sqrt(2);
        this.runAction(cc.sequence(cc.moveBy(e / (wx.ant.baseSpeed * this.speed), e * Math.sin(t), e * Math.cos(t)), cc.removeSelf())), this.isAnt() && this.scheduleUpdate(), bs.registerMessageHandler("gameover", this, function() {
            this.unscheduleUpdate(), this.dead || this.stopAllActions()
        })
    },_isTouchInside: function(t) {
        return t = this.getParent().convertTouchToNodeSpace(t), 20 > cc.pDistance(t, this.getPosition())
    },onTouchBegan: function(t) {
        return wx.ant.isGameOver || this.dead || !this._isTouchInside(t) ? !1 : (this.dead = !0, this.setSpriteFrame(bs.spriteFrameFromName("cmy_" + this.type + "_caisi.png")), this.stopAllActions(), this.isAnt() ? (this.runAction(cc.sequence(cc.delayTime(.2), cc.fadeOut(.3), cc.removeSelf())), bs.postMessage("antdead", this), cc.audioEngine.playEffect("ant.mp3")) : (wx.ant.isGameOver = !0, this.runAction(cc.sequence(cc.delayTime(.2), cc.callFunc(function() {
            bs.postMessage("gameover", this)
        }.bind(this)))), cc.audioEngine.playEffect("other.mp3")), !0)
    },update: function() {
        (!wx.ant.isGameOver && 0 > this.x || this.x > wx.ant.gameArea.width || 0 > this.y || this.y > wx.ant.gameArea.height) && (wx.ant.isGameOver = !0, bs.postMessage("gameover", this))
    },isAnt: function() {
        return _(this.type).startsWith("my")
    }}), wx.init = function() {
    bs.init(), cc.spriteFrameCache.addSpriteFrames("texture.plist")
}, wx.ant.Button = bs.TouchableSprite.extend({ctor: function(t, e, n, i) {
        this._super(), this.initWithSpriteFrameName("cmy_btn.png", n, i), this._internalImg.setColor(e), this.setIsSwallowTouch(!0), t = cc.LabelTTF.create(t, "黑体", 26), this.addChild(t), bs.centerNodeToParent(t)
    }}), wx.ant.ShareTip = cc.LayerColor.extend({ctor: function() {
        this._super(), this.init(cc.color(0, 0, 0, 200)), bs.registerTouchEventOneByOne(this, !0);
        var t = new cc.Sprite("#cmy_share_tip.png");
        t.setAnchorPoint(1, 1), t.setPosition(cc.winSize.width, cc.winSize.height), this.addChild(t)
    },onTouchBegan: function() {
        return this.scheduleOnce(this.removeFromParent.bind(this), 0), !0
    }}), wx.ant.UILayer = bs.Layer.extend({mainMenu: null,killCount: 0,killCountLbl: null,gameLayer: null,retryBoard: null,shareTip: null,first: !0,ctor: function() {
        this._super(), this.init(), wx.cb && wx.cb.onenter && wx.cb.onenter();
        var t = cc.winSize, e = new cc.Sprite("bg.jpg");
        e.setAnchorPoint(0, 0), Util.fullscreenNode(e, cc.size(320, 480)), this.addChild(e), e = new cc.Sprite("#cmy_title.png"), e.x = t.width / 2, e.y = t.height - 60, this.addChild(e), e = this.mainMenu = cc.Node.create(), this.addChild(e), bs.centerNodeToParent(e);
        var n = new wx.ant.Button("开始", wx.ant.green, this.play, this);
        n.y = 30, e.addChild(n), e = cc.LabelTTF.create("已消灭蚂蚁", "黑体", 20), e.setColor(cc.color(0, 0, 0)), e.setPosition(t.width / 2 - 15, t.height / 2 + wx.ant.gameArea.height / 2 - 10), this.addChild(e), t = this.killCountLbl = cc.LabelTTF.create("0", "黑体", 24), t.setColor(cc.color(0, 0, 0)), t.setPosition(bs.getRight(e) + 20, e.y), this.addChild(t)
    },onEnter: function() {
        this._super(), bs.registerMessageHandler("gameover", this, this.gameOver), bs.registerMessageHandler("antdead", this, this.antDead)
    },play: function() {
        this.startTime = (new Date).getTime(), this.setKillCount(0), this.retryBoard && (this.retryBoard.removeFromParent(), delete this.retryBoard), this.mainMenu.setVisible(!1), this.gameLayer && this.gameLayer.removeFromParent();
        var t = this.gameLayer = new wx.ant.GameLayer;
        this.addChild(t), this.first ? Util.trackEvent("game", "play") : Util.trackEvent("game", "replay"), this.first = !1
    },share: function(t) {
        Util.trackEvent("game", "share"), t(), t = this.shareTip = new wx.ant.ShareTip, this.addChild(t)
    },follow: function() {
        Util.trackEvent("game", "follow"), ih5game.follow()
    },antDead: function() {
        this.setKillCount(this.killCount + 1)
    },setKillCount: function(t) {
        this.killCount = t, this.killCountLbl.setString(this.killCount + "")
    },gameOver: function(t) {
        this.gameLayer.stop();
        console.log( "gameover" );
        n = wx.ant.lastScore = this.killCount;
        dp_submitScore(n);
        // alert("kao");
       /*  var e = wx.ant.lastTime = Math.round(((new Date).getTime() - this.startTime) / 1e3), n = wx.ant.lastScore = this.killCount, i = n >= 101 ? wx.ant.rank[101] : wx.ant.rank[n], i = wx.ant.lastRank = i.toFixed(2), i = _.sprintf("你%d秒内消灭了%d个蚂蚁，超过了%s%%的好友，获得了【%s】的称号，怎能不向朋友嘚瑟一下？", e, n, i, wx.ant.getTitle());
       var cont = window.updatetitle(i);
        ih5game.set("jf", {r: n,t: e}), Util.trackEvent("game", "end", "score", n);

        if (endgame.env.baidu && !('flyflow_webkit_js' in window)) {
            // 隐藏你的分享入口
            this.showRetryBoard(t);
        }else{
            if(window.confirm(i)){
                if (endgame.env.is91){
                    var img = "http://iwan.baidu.com/xxx_xiaoyouxi/xyz_abc/games/ant/res/share_icon.png";
                    var pic = window.encodeURIComponent ? window.encodeURIComponent(img) : img;
                    window.open("http://bbx2.sj.91.com/Softs.ashx?act=105&sact=2&content="+cont+"&picurl="+pic+"&type=1&typewith=1")
                }else{
                    endgame.share.trigger();
                }
                this.showRetryBoard(t);
                //this.share(this.showRetryBoard.bind(this, t));
            }else{
                this.showRetryBoard(t);
            }
        }*/
    },showRetryBoard: function(t) {
        var e = this.retryBoard = new cc.Sprite("#cmy_board.png");
        this.addChild(e), bs.centerNodeToParent(e);
        var n = parseInt(this.killCountLbl.getString());
        t = _.sprintf(wx.ant.ggtext[t.type.substr(0, 2)], {count: n,next: n + 1}), t = cc.LabelTTF.create(t, "黑体", 20), t.setColor(cc.color(0, 0, 0)), t.setHorizontalAlignment(cc.TEXT_ALIGNMENT_CENTER), t.setDimensions(cc.size(e.width - 40, 0)), bs.positionNodeToParentPercent(t, e, .5, .76), e.addChild(t), t = new wx.ant.Button("爬起再战", wx.ant.green, this.play, this), bs.positionNodeToParentPercent(t, e, .5, .47), e.addChild(t), t = new wx.ant.Button("玩玩别的", wx.ant.red, this.more, this), bs.positionNodeToParentPercent(t, e, .5, .2), e.addChild(t)
    }});
